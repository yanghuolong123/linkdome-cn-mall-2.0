(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-569a0aae"],{"6a66":function(t,e,s){},"8b48":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"h-screen flex w-full"},[i("div",{staticClass:"login-center"},[i("div",{staticClass:"full-page-bg-color",attrs:{slot:"no-body"},slot:"no-body"},[i("div",{staticClass:"vx-row"},[i("div",{staticClass:" bg-white login-right"},[i("div",{staticClass:"login-text"},[t._m(0),i("form",{on:{keydown:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.accountLogin(e):null}}},[i("vs-input",{staticClass:"w-full\n\t\t\t\t\t\t\t\tmb-6 no-icon-border",attrs:{icon:"icon icon-user","icon-pack":"feather","label-placeholder":"用户名"},model:{value:t.account,callback:function(e){t.account=e},expression:"account"}}),i("vs-input",{staticClass:"w-full mb-4 no-icon-border",staticStyle:{"margin-top":"35px"},attrs:{type:"password",icon:"icon icon-lock","icon-pack":"feather","label-placeholder":"密码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),i("div",{staticClass:"flex flex-wrap justify-between my-5"},[i("vs-checkbox",{staticClass:"mb-3",model:{value:t.isRememberMe,callback:function(e){t.isRememberMe=e},expression:"isRememberMe"}},[t._v("记住登录状态")]),i("router-link",{staticStyle:{"font-size":"14px",color:"#33b3ed"},attrs:{to:"/pages/forgot-password"}},[t._v("忘记密码？")])],1)],1),i("vs-button",{staticClass:"float-right login-bgc",on:{click:t.accountLogin}},[t._v("登录")]),i("div",{staticClass:"line"}),i("img",{staticClass:"login-logo",attrs:{src:s("b5cd")}})],1)])])])]),i("vs-alert",{attrs:{active:t.isalert,color:"danger","icon-pack":"feather",icon:"icon-info"}},[i("span",[t._v(t._s(t.alertText))])])],1)},o=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"vx-card__title"},[s("h4",{staticClass:"mb-4"},[t._v("登录")]),s("p",[t._v("欢迎回来，请登录您的账户。")])])}],a=(s("7514"),s("55dd"),s("c5f6"),s("28a5"),s("f499")),n=s.n(a),r=(s("7f7f"),s("ac6a"),s("96cf"),s("3b8d")),c=s("96c3"),l=s("c24f"),m=s("6821f"),u=s.n(m),d=s("2ef0"),p=s.n(d),f={data:function(){return{account:"",password:"",alertText:"",isalert:!1,isRememberMe:!1}},activated:function(){},methods:{accountLogin:function(){var t=this,e=t.account,s=t.password;""==e&&t.showHint("账号不能为空。"),""==s&&t.showHint("密码不能为空。"),s=u()(s),Object(l["a"])({userName:e,password:s}).then(function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(s){var i,o,a,r,l,m,u,d;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(i=s.data.data,200!==s.data.code){e.next=16;break}return t.commitStoreData(i),e.next=5,Object(c["i"])();case 5:o=e.sent,200==o.data.code&&(a=o.data.data.main,r=[],a.forEach(function(t){r.push({id:t.id,name:t.name}),t.subpagesList.forEach(function(t){r.push({id:t.id,name:t.name})})}),a=p.a.orderBy(a,["id"]),window.localStorage.setItem("menuarr",n()(r)),window.localStorage.setItem("menulist",n()(a))),l=[],1==i.roles_id||2==i.roles_id?(a.forEach(function(t){l.push(t.id+""),t.subpagesList.forEach(function(t){l.push(t.id+"")})}),i.pages_privilege=l,t.$store.commit("setAccess",i.pages_privilege),t.$store.commit("setAccountLvl","super")):(l=i.pages_privilege?i.pages_privilege.split(","):[],t.$store.commit("setAccess",l),i.type_id.indexOf(52)>-1?t.$store.commit("setAccountLvl","shopping"):i.type_id.indexOf(51)>-1?t.$store.commit("setAccountLvl","floor"):t.$store.commit("setAccountLvl","store")),m=p.a.cloneDeep(l),m.map(function(t){return isNaN(Number(t))?Number(t):0}),m.sort(),u=Number(m[0])?Number(m[0]):0,u?(d=p.a.find(r,["id",u]),d?(d={name:d.name},t.$store.commit("shopUserName",d),t.$router.push(d)):t.showHint("抱歉，你没有权限")):t.showHint("抱歉，你没有权限"),e.next=17;break;case 16:305!==s.data.code&&304!==s.data.code||t.showHint("账号或密码错误");case 17:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(t){console.log(t)})},commitStoreData:function(t){var e=this.isRememberMe;this.$store.commit("setToken",{token:t.token,isRememberMe:e}),this.$store.commit("allType",t.type_id),this.$store.commit("setAvator",t.avatar?t.avatar:s("31bd")),this.$store.commit("setUserName",t.username),this.$store.commit("setUserId",t.userid),this.$store.commit("setBzid",t.bzid),this.$store.commit("setlvl",t.lvl),this.$store.commit("setRole",t.roles_id),this.$store.commit("setRoleName",t.roles_name),this.$store.commit("setRoleProperty",t.property_id),this.$store.commit("setchecklist",t.checklist),this.$store.commit("setrealName",t.realname),this.$store.commit("setmobile",t.mobile),this.$store.commit("setSex",t.sex),this.$store.commit("setemail",t.email),this.$store.commit("setCompanyId",t.company_id),this.$store.commit("setEntityPrivilege",JSON.parse(t.business_zone_privilege))},showHint:function(t){return this.isalert=!0,this.alertText=t,this.alertType(),!1},alertType:function(){var t=this;setTimeout(function(){t.isalert=!1},2e3)}}},h=f,v=(s("f4995"),s("2877")),b=Object(v["a"])(h,i,o,!1,null,null,null);e["default"]=b.exports},a21f:function(t,e,s){var i=s("584a"),o=i.JSON||(i.JSON={stringify:JSON.stringify});t.exports=function(t){return o.stringify.apply(o,arguments)}},f499:function(t,e,s){t.exports=s("a21f")},f4995:function(t,e,s){"use strict";var i=s("6a66"),o=s.n(i);o.a}}]);