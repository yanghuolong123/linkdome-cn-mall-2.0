(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c50d5916"],{"01a1":function(t,e,i){"use strict";var n=i("a35c"),a=i.n(n);a.a},1908:function(t,e,i){},2373:function(t,e,i){},"268f":function(t,e,i){t.exports=i("fde4")},2731:function(t,e,i){"use strict";var n=i("2373"),a=i.n(n);a.a},"39a1":function(t,e,i){},"3f26":function(t,e,i){},4618:function(t,e,i){"use strict";var n=i("3f26"),a=i.n(n);a.a},"470b":function(t,e,i){"use strict";var n=i("39a1"),a=i.n(n);a.a},"505b":function(t,e,i){},"5fe9":function(t,e,i){"use strict";function n(t,e){return void 0===e&&(e=12),+parseFloat(t.toPrecision(e))}function a(t){var e=t.toString().split(/[eE]/),i=(e[0].split(".")[1]||"").length-+(e[1]||0);return i>0?i:0}function o(t){if(-1===t.toString().indexOf("e"))return Number(t.toString().replace(".",""));var e=a(t);return e>0?n(t*Math.pow(10,e)):t}function r(t){h&&(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER)&&console.warn(t+" is beyond boundary when transfer to integer, the results may not be accurate")}function s(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];if(i.length>0)return s.apply(void 0,[s(t,e),i[0]].concat(i.slice(1)));var c=o(t),l=o(e),f=a(t)+a(e),u=c*l;return r(u),u/Math.pow(10,f)}function c(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];if(i.length>0)return c.apply(void 0,[c(t,e),i[0]].concat(i.slice(1)));var o=Math.pow(10,Math.max(a(t),a(e)));return(s(t,o)+s(e,o))/o}function l(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];if(i.length>0)return l.apply(void 0,[l(t,e),i[0]].concat(i.slice(1)));var o=Math.pow(10,Math.max(a(t),a(e)));return(s(t,o)-s(e,o))/o}function f(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];if(i.length>0)return f.apply(void 0,[f(t,e),i[0]].concat(i.slice(1)));var c=o(t),l=o(e);return r(c),r(l),s(c/l,Math.pow(10,a(e)-a(t)))}function u(t,e){var i=Math.pow(10,e);return f(Math.round(s(t,i)),i)}Object.defineProperty(e,"__esModule",{value:!0});var h=!0;function d(t){void 0===t&&(t=!0),h=t}var m={strip:n,plus:c,minus:l,times:s,divide:f,round:u,digitLength:a,float2Fixed:o,enableBoundaryChecking:d};e.strip=n,e.plus=c,e.minus=l,e.times=s,e.divide=f,e.round=u,e.digitLength=a,e.float2Fixed=o,e.enableBoundaryChecking=d,e["default"]=m},"6d57":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tabitem"},[t._t("default")],2)},a=[],o={name:"TabItem",mounted:function(){var t=this;this.$nextTick(function(){t.updateNav()})},methods:{updateNav:function(){this.$parent.updateNav()}},destroyed:function(){var t=this;this.$nextTick(function(){t.updateNav()})}},r=o,s=(i("e4be"),i("2877")),c=Object(s["a"])(r,n,a,!1,null,"d833551c",null);e["a"]=c.exports},7745:function(t,e,i){"use strict";var n=i("914a"),a=i.n(n);a.a},"776a":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tab-box"},[i("div",{staticClass:"tab-bar"},[i("div",{staticClass:"tab-bar-left"},[t.isNowTime?[i("span",[t._v(t._s(t.date))]),i("span",[t._v(t._s(t.time))])]:i("span",[t._v("\n        "+t._s(t.titleList[t.value])+"\n        "),"新老顾客占比"==t.titleList[0]?i("Tooltip",{attrs:{content:t.tootipText,placement:"bottom",theme:"light",transfer:"","max-width":"600"}},[i("icons",{attrs:{type:"wenhao"}})],1):t._e()],1)],2),i("div",{staticClass:"tab-bar-right"},[t._t("select"),i("ul",[t._l(t.navList,function(e,n){return i("li",{key:n,attrs:{title:t.iconTitle[e.icon]?t.iconTitle[e.icon]:""},on:{click:function(i){t.handleClick(n,e)}}},[i("span",{staticClass:"navitemIcon"},[i("icons",{attrs:{type:e.icon,size:20,color:t.currentIndex===n?t.iconColor:"#9D9D9DFF"}})],1)])}),t._t("export")],2)],2)]),i("div",{staticClass:"tab-con",style:t.contentStyle},[t._t("default")],2)])},a=[],o=(i("28a5"),i("ac6a"),i("7f7f"),i("c5f6"),i("c1df")),r=i.n(o),s={name:"tabs",props:{value:{type:Number,default:0},iconColor:{type:String,default:"#2280D7"},isNowTime:{type:Boolean,default:!1},exportXls:{type:Boolean,default:!1}},data:function(){return{tootipText:"新顾客：在所选时间段内仅来过1次的人数\n老顾客：在所选时间段内来过2次及以上的人数",navList:[],titleList:[],currentIndex:0,iconTitle:{zhexiantu:"折线图",62:"柱状图","biaoge-copy":"详细数据",xiangxia:"查看全部实体排行",ditu:"出入口客流",fenxi:"饼状图",chakan:"查看所有"},date:"",time:""}},mounted:function(){var t=this;this.isNowTime&&setInterval(function(){t.formatTime()},1e3)},computed:{contentStyle:function(){var t={};return t={transform:"translateX(-".concat(this.value,"00%)")},t}},methods:{getTabs:function(){return this.$children.filter(function(t){return"TabItem"===t.$options.name})},updateNav:function(){var t=this;this.navList=[],this.titleList=[];var e=this.$slots.default.filter(function(t){return void 0!==t.data});e.forEach(function(e,i){e.data.attrs&&(t.navList.push({label:e.data.attrs.label||"",icon:e.data.attrs.icon||"",name:i}),t.titleList.push(e.data.attrs.titles||""),t.handleClick(0))})},handleClick:function(t,e){this.currentIndex=t,this.$emit("input",t),this.$emit("on-click",t,e)},formatTime:function(){var t=r()().format("YYYY-MM-DD HH:mm:ss").split(" ");this.date=t[0],this.time=t[1]}}},c=s,l=(i("a6b3"),i("2877")),f=Object(l["a"])(c,n,a,!1,null,"8df506a6",null);e["a"]=f.exports},"914a":function(t,e,i){},a35c:function(t,e,i){},a6b3:function(t,e,i){"use strict";var n=i("1908"),a=i.n(n);a.a},ab30:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mt-6 ranking-box"},[i("div",{staticClass:"box-card bg-white"},[i("chart-tabs",{attrs:{title:t.mallTitle,xAxis:t.leftXaxis,series:t.leftSeries,type:["bar"],horizonta:""}})],1),i("div",{staticClass:"box-card bg-white"},["bar"===t.chartType?[i("chart-tabs",{attrs:{title:t.formatTitle,xAxis:t.rightXaxis,series:t.rightValue,type:["bar"],horizonta:""}})]:[i("div",{staticClass:"pieTitle"},[t._v("客流占比")]),t.isNodata?i("div",{staticClass:"pieNoData"}):t._e(),i("vue-apex-charts",{ref:"pieCharts",attrs:{width:"100%",height:"400",type:"pie",options:t.peiOptions,series:t.pieSeries}})]],2)])},a=[],o=(i("7f7f"),i("7514"),i("6b54"),i("795b")),r=i.n(o),s=(i("ac6a"),i("5df3"),i("c5f6"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.canshow?i("i-tabs",{model:{value:t.current,callback:function(e){t.current=e},expression:"current"}},[t._t("default",null,{slot:"select"}),t._l(t.tabsInfo,function(e,n){return i("tab-item",{key:n,attrs:{icon:t.iconCheck[e.type],titles:e.title}},[i("vue-apex-charts",{attrs:{type:e.type,height:"400",options:t.optionOfapxeCharts,series:t.cloneSeries}})],1)}),i("tab-item",{attrs:{icon:"biaoge-copy",titles:t.title[0],id:"table-item"}},[i("vs-table",{attrs:{data:t.tableData.data,maxHeight:"400px",noDataText:t.nodata},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.data;return t._l(n,function(e,n){return i("vs-tr",{key:n},t._l(t.tableData.column,function(n,a){return i("vs-td",{key:a},[t._v(t._s(e[n.key]?e[n.key].toLocaleString():""))])}),1)})}}])},[i("template",{slot:"thead"},t._l(t.tableData.column,function(e,n){return i("vs-th",{key:n,staticClass:"px-2"},[t._v(t._s(e.title))])}),1)],2)],1),t._l(t.tabsInfo,function(e,n){return t.showChakan?i("tab-item",{key:n,attrs:{icon:"chakan",title:e.title}},[i("div",{staticStyle:{height:"400px",width:"100%","overflow-y":"auto","overflow-x":"hidden"}},[i("vue-apex-charts",{attrs:{type:e.type,width:t.chartWidth,height:t.chartHeight,options:t.optionOfapxeCharts,series:t.cloneSeries}})],1)]):t._e()})],2):t._e()}),c=[],l=i("cebc"),f=i("75fc"),u=i("776a"),h=i("6d57"),d=i("1321"),m=i.n(d),p=i("c66f"),x=i("2ef0"),v=i.n(x),g={name:"chartTabs",components:{iTabs:u["a"],tabItem:h["a"],VueApexCharts:m.a,indicatorSelector:p["a"]},props:{xAxis:{type:Array,default:function(){return[]}},series:{type:Array,default:function(){return[]}},type:{type:Array,default:function(){return["line","bar"]}},chartLib:{type:String,default:"Apex"},title:{type:Array,default:function(){return["客流量趋势","客流量趋势"]}},horizonta:{type:Boolean,default:!1},extraOption:{type:Object,default:function(){return{}}},footfallSelect:{type:Boolean,default:!1}},data:function(){return{showChakan:!1,isAllData:!1,current:0,nodata:"暂无数据",chartWidth:"99%",chartHeight:385,canshow:!1,option:{legend:{},tooltip:{trigger:"axis"},dataset:{source:[]},grid:{left:"center",width:"90%"},xAxis:{type:"category"},yAxis:{type:"value"},series:[]},iconCheck:{bar:"62",line:"zhexiantu"},apexOptions:{xaxis:{categories:[],labels:{show:!0,style:{fontFamily:"Roboto,sans-serif"}}},colors:["#00A0E9","#2BD9CF","#8D82F0","#E8585A","#E8585A","#94E2FF"],yaxis:{labels:{formatter:function(t){return t?t.toLocaleString():""},style:{fontFamily:"Roboto,sans-serif",marginLeft:"10px"}}},tooltip:{shared:!0},stroke:{curve:"straight",width:2},plotOptions:{bar:{horizontal:!1,endingShape:"rounded",radius:0,distributed:!1}},dataLabels:{enabled:!1},noData:{text:"暂无数据",align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},chart:{toolbar:{show:!1},fontFamily:"source_han_sans_cn",zoom:{enabled:!1}},responsive:[{breakpoint:1e3,options:{plotOptions:{bar:{horizontal:!1}},legend:{position:"bottom"}}}]}}},computed:{mergeData:function(){return[].concat(Object(f["a"])(this.xAxis),Object(f["a"])(this.series))},tableData:function(){var t=this,e=[],i=[];return this.mergeData.length?(this.mergeData.forEach(function(t,i){var n=t.name,a=t.key;e.push({title:n,key:a})}),this.xAxis[0].data.forEach(function(n,a){var o={};e.forEach(function(e,i){o[e.key]=t.mergeData[i].data[a]}),i.push(o)}),{column:e,data:i}):{column:e,data:i}},optionOfapxeCharts:function(){if(!this.xAxis.length)return this.apexOptions;var t;this.isAllData?(t=this.xAxis[0].data,t.length<10?(this.chartHeight=400,this.chartWidth="100%"):(this.chartHeight=40*t.length,this.chartWidth="99%")):(this.showChakan=this.xAxis[0].data.length>10,t=v.a.take(this.xAxis[0].data,10),this.chartHeight=400);var e=Boolean(t.length),i={plotOptions:{bar:{columnWidth:t.length<5?"20%":"70%"}}};if(this.horizonta){var n={yaxis:{labels:{offsetY:t.length<5?-10:0,offsetX:10,show:e},show:e},plotOptions:{bar:{barHeight:t.length<5?"20%":"70%",horizontal:!0}},xAxis:{lines:{show:e}},grid:{yaxis:{lines:{show:e}}}};i=v.a.merge(i,n)}var a=v.a.merge(this.apexOptions,i),o={xaxis:{categories:t,labels:{formatter:function(t){return t.toLocaleString()}}}};return Object(l["a"])({},a,o)},cloneSeries:function(){var t=v.a.cloneDeep(this.series);return this.isAllData?t:(t.map(function(t){var e=[];t.data.map(function(t){e.length<10&&e.push(t)}),t.data=e}),t)},tabsInfo:function(){var t=this,e=[];return this.type.forEach(function(i,n){var a={type:i,title:t.title[n]};e.push(a)}),e}},watch:{series:function(){var t=this;this.canshow=!1,this.$nextTick(function(){t.canshow=!0})},current:function(){2==this.current?this.isAllData=!0:this.isAllData=!1}},methods:{transformToSet:function(t,e){var i=[];if(!t.length||!e.length)return{dataset:{source:i}};var n=e.map(function(t){return t.name});t[0].data.forEach(function(t,n){var a=[];a.push(t),e.forEach(function(t){a.push(t.data[n])}),i.push(a)}),n.unshift(t[0].key||""),i.unshift(n);var a=this.initSeriesOfEchart();return{dataset:{source:i},seriesCheckObj:a}},initSeriesOfEchart:function(){var t=this,e={};return this.type.forEach(function(i){var n={series:[]};t.series.forEach(function(t){n.series.push({type:i,barMaxWidth:80})}),e[i]=n}),e}}},y=g,b=(i("2731"),i("2877")),B=Object(b["a"])(y,s,c,!1,null,"405a4bb2",null),w=B.exports,_=i("3191"),S=i("c276"),k=i("5fe9"),T=i.n(k),A=(i("3022"),{name:"home_ranking",components:{chartTabs:w,VueApexCharts:m.a},props:{range:{type:String},propertyId:{type:null,default:"company"},chartType:{type:String,default:"bar"},bzids:{type:Array,default:function(){return[]}},orderName:{type:String,default:"商铺"}},data:function(){return{charType:"pie",isNodata:!1,current:0,businessCurrent:0,rightTabCurrent:0,columns:[{title:"名称",key:"name"},{title:"客流量",key:"enter"}],colors:["#42efe9"],leftXaxis:[],leftSeries:[],rightXaxis:[],rightValue:[],leftTableData:[],rightTableData:[],chartHeight:700,ismallMore:!1,isformatMore:!1,compareBzids:[],isLeftAllzero:!1,isRightAllzero:!1,peiOptions:{chart:{type:"pie"},dataLabels:{enabled:!0,formatter:function(t,e){if(e.seriesIndex==e.w.globals.seriesPercent.length-1){var i=[];e.w.globals.seriesPercent.map(function(t){i.push(Number(t[0].toFixed(2)))});var n=Number(v.a.sum(v.a.initial(i)).toFixed(2)),a=T.a.minus(100,n);return a+"%"}return t.toFixed(2)+"%"}},labels:[],legend:{position:"left"},tooltip:{followCursor:!0,y:{formatter:function(t){return Number(t).toLocaleString()}}}},pieSeries:[]}},activated:function(){},watch:{range:function(t,e){t!==e&&this.topDataReq()},propertyId:function(t,e){t!==e&&this.bzids.length>1&&this.topDataReq()},mallTitle:function(t,e){var i=this;this.$nextTick(function(){i.$refs.rankList.updateNav()})},formatTitle:function(t,e){var i=this;this.$nextTick(function(){i.$refs.bussniessRank.updateNav()})}},computed:{formatTitle:function(){return this.isformatMore?["业态排行 T O P 10","业态排行"]:["业态排行"]},mallTitle:function(){return this.ismallMore?["".concat(this.orderName,"排行 T O P 10"),"".concat(this.orderName,"排行")]:["".concat(this.orderName,"排行")]},leftFormatedData:function(){return Object(S["e"])(this.leftTableData,["enter"])},rightFormatedData:function(){return Object(S["e"])(this.rightTableData,["enter"])}},methods:{topDataReq:function(){var t=this,e="store";"company"!==this.propertyId&&1!==this.bzids.length&&this.propertyId||(e="mall"),r.a.all([Object(_["r"])(this.initParams(e)),Object(_["r"])(this.initParams("format"))]).then(function(e){var i=t.handleResData(e[0]),n=t.handleResData(e[1]);t.leftXaxis=i.xAxis,t.leftSeries=i.series,t.rightXaxis=n.xAxis,t.rightValue=n.series}).catch(function(t){console.log(t)})},initParams:function(t){var e=null;e="company"!==this.propertyId&&1!==this.bzids.length&&this.propertyId?this.propertyId:"company";var i={entity:t,type:"enter",range:this.range,id:e};return i},entitysCompareReq:function(t,e){var i=this;this.compareBzids=e;var n=Object(S["j"])(t),a=[];e.forEach(function(t){return a.push(t.id)});var o={type:"enter",range:t.toString(),innerRange:n,bzid:a.toString()};Object(_["w"])(o).then(function(t){i.handleCompareRes(t)}).catch(function(t){console.log(t)})},handleResData:function(t){var e=t.data.data.company?t.data.data.company:t.data.data,i=v.a.orderBy(e,["enter"],["desc"]),n=this.processData(i),a=n.xAxis,o=n.value,r=n.uniqarr;return r.length&&(i=r),{xAxis:[{name:"实体名称",key:"entity",data:a}],series:[{name:"客流量",data:o,key:"enter"}]}},processData:function(t){var e=[],i=[],n=[];return t.forEach(function(t){if(t.business_type_id){var a=v.a.find(n,function(e){return e.business_type_id===t.business_type_id});a?n.forEach(function(e){e.business_type_id===t.business_type_id&&(e.enter+=t.enter)}):n.push(t)}else e.push(t.name),i.push(t.enter)}),n.length&&n.forEach(function(t){e.push(t.name),i.push(t.enter)}),{xAxis:e,value:i,uniqarr:n}},handleCompareRes:function(t){var e=t.data.data,i=[],n=[],a=[],o=[],r=[],s=[];this.compareBzids.forEach(function(t,i){var n=0;e.forEach(function(t,e){t.compares[i]&&(n+=t.compares[i].number)}),o.push({name:t.name,y:n})}),r.push({size:"50%",name:"客流排行",data:o.filter(function(t){return t.y>0})});var c=v.a.orderBy(o,"y","desc");c.forEach(function(t){i.push(t.name),a.push(t.y),s.push({name:t.name,enter:t.y})}),n=[{name:"客流量",data:a,showInLegend:!1}],this.leftXaxis=[{name:"名称",key:"time",data:i}],this.leftSeries=n;var l=[],f=[];o.forEach(function(t){l.push(t.y),f.push(t.name)}),this.peiOptions.labels=f,0==v.a.sum(l)?this.isNodata=!0:this.isNodata=!1,this.pieSeries=l,this.$refs.pieCharts.updateOptions({labels:f})}}}),C=A,D=(i("fb37"),i("7745"),Object(b["a"])(C,n,a,!1,null,"09c7d9f3",null));e["a"]=D.exports},b81d:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{position:"relative"}},[i("Card",{staticClass:"selectorbox"},[i("flow-selector",{ref:"selector",attrs:{isGate:!0,isArea:!0,isFloor:!0,isStore:!0,isShowTypeSelect:!1,compare:!1,footFall:!1,isRanking:!0,isReset:!0,routName:t.homeName},on:{"on-change":t.handelChange}})],1),i("home-ranking",{ref:"ranking",attrs:{orderName:t.orderName,chartType:t.chartType}})],1)},a=[],o=(i("ac6a"),i("ab30")),r=i("67af"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"cd-1"},[i("div",{staticClass:"tx",on:{click:t.showList}},[t._v(t._s(t.showText))]),t.showSelect?i("div",{staticClass:"list",class:{actionSelect:t.showSelect}},[t._m(0),i("div",{staticClass:"group"},[i("ul",t._l(t.list1,function(e,n){return i("li",{on:{mouseover:function(e){t.mouseoveList(n)},mouseout:function(e){t.mouseoutList(n)}}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.ifBox,expression:"item.ifBox"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.ifBox)?t._i(e.ifBox,null)>-1:e.ifBox},on:{click:function(e){t.selectName(n)},change:function(i){var n=e.ifBox,a=i.target,o=!!a.checked;if(Array.isArray(n)){var r=null,s=t._i(n,r);a.checked?s<0&&t.$set(e,"ifBox",n.concat([r])):s>-1&&t.$set(e,"ifBox",n.slice(0,s).concat(n.slice(s+1)))}else t.$set(e,"ifBox",o)}}}),e.children&&e.children.length>0?i("Icon",{attrs:{type:"ios-arrow-forward"}}):t._e(),i("span",[t._v("\n                        "+t._s(e.name)+"\n                        "),e.ifShow?i("div",{staticClass:"shoppingList",class:{listWidth:!e.children}},t._l(e.children,function(e,a){return i("div",{staticClass:"shoppingListText",on:{mouseover:function(e){t.mouseoveShopping(n,a)},mouseout:function(e){t.mouseoutShopping(n,a)}}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.ifBox,expression:"children.ifBox"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.ifBox)?t._i(e.ifBox,null)>-1:e.ifBox},on:{click:function(e){t.shoppingName(n,a)},change:function(i){var n=e.ifBox,a=i.target,o=!!a.checked;if(Array.isArray(n)){var r=null,s=t._i(n,r);a.checked?s<0&&t.$set(e,"ifBox",n.concat([r])):s>-1&&t.$set(e,"ifBox",n.slice(0,s).concat(n.slice(s+1)))}else t.$set(e,"ifBox",o)}}}),e.children&&e.children.length>0?i("Icon",{attrs:{type:"ios-arrow-forward"}}):t._e(),i("span",[t._v("\n                                    "+t._s(e.name)+"\n                                     "),e.ifShow?i("div",{staticClass:"shoppingList",class:{listWidth:!e.children},staticStyle:{top:"-1px"}},t._l(e.children,function(e,o){return i("div",{staticClass:"shoppingListText",on:{mouseover:function(e){t.mouseoveFloor(n,a,o)},mouseout:function(e){t.mouseoutFloor(n,a,o)}}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.ifBox,expression:"children.ifBox"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.ifBox)?t._i(e.ifBox,null)>-1:e.ifBox},on:{click:function(e){t.floorName(n,a,o)},change:function(i){var n=e.ifBox,a=i.target,o=!!a.checked;if(Array.isArray(n)){var r=null,s=t._i(n,r);a.checked?s<0&&t.$set(e,"ifBox",n.concat([r])):s>-1&&t.$set(e,"ifBox",n.slice(0,s).concat(n.slice(s+1)))}else t.$set(e,"ifBox",o)}}}),e.gate&&e.gate.length>0?i("Icon",{attrs:{type:"ios-arrow-forward"}}):t._e(),i("span",[t._v("\n                                               "+t._s(e.name)+"\n                                               "),e.ifShow?i("div",{staticClass:"shoppingList",class:{listWidth:!e.gate},staticStyle:{top:"-1px"}},t._l(e.gate,function(e,r){return i("div",{staticClass:"shoppingListText"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.ifBox,expression:"gate.ifBox"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.ifBox)?t._i(e.ifBox,null)>-1:e.ifBox},on:{click:function(e){t.inAndOutName(n,a,o,r)},change:function(i){var n=e.ifBox,a=i.target,o=!!a.checked;if(Array.isArray(n)){var r=null,s=t._i(n,r);a.checked?s<0&&t.$set(e,"ifBox",n.concat([r])):s>-1&&t.$set(e,"ifBox",n.slice(0,s).concat(n.slice(s+1)))}else t.$set(e,"ifBox",o)}}}),i("span",[t._v(t._s(e.name))])])})):t._e()])],1)})):t._e()])],1)})):t._e()])],1)}))])]):t._e()])},c=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"list-title"},[i("p",[t._v("购物中心")]),i("p",[t._v("楼层")]),i("p",[t._v("商铺")]),i("p",[t._v("区域 / 出入口 / 排队处")])])}],l=(i("6b54"),i("7f7f"),i("2ef0")),f=i.n(l),u=i("ad00"),h={name:"select-list",components:{},data:function(){return{listTest:[],showSelect:!1,list1:[{name:"购物中心1",id:1,ifBox:!1,ifShow:!1,children:[{name:"楼层1",ifBox:!1,ifShow:!1,id:12,children:[{ifBox:!1,ifShow:!1,name:"店1",id:22,gate:[{ifBox:!1,id:102,name:"出入100"},{ifBox:!1,id:103,name:"出入200"},{ifBox:!1,id:104,name:"出入300"}]},{ifBox:!1,ifShow:!1,id:33,name:"店2",gate:[{ifBox:!1,id:111,name:"出入101"},{ifBox:!1,id:112,name:"出入202"},{ifBox:!1,id:113,name:"出入303"}]},{ifBox:!1,ifShow:!1,name:"店3",id:44,gate:[{ifBox:!1,id:118,name:"出入1010"},{ifBox:!1,id:116,name:"出入2020"},{ifBox:!1,id:119,name:"出入3030"}]}]},{name:"楼层2",ifShow:!1,ifBox:!1,id:13,children:[{ifBox:!1,ifShow:!1,name:"店1",id:432,gate:[{ifBox:!1,id:42378,name:"出入100"},{ifBox:!1,id:2313,name:"出入200"},{ifBox:!1,id:531,name:"出入300"}]},{ifBox:!1,ifShow:!1,id:4848,name:"店2",gate:[{ifBox:!1,id:622,name:"出入101"},{ifBox:!1,id:8631,name:"出入202"},{ifBox:!1,id:6328,name:"出入303"}]},{ifBox:!1,ifShow:!1,id:52131,name:"店3",gate:[{ifBox:!1,id:7283,name:"出入1010"},{ifBox:!1,id:886,name:"出入2020"},{ifBox:!1,id:1143,name:"出入3030"}]}]},{name:"楼层3",ifShow:!1,ifBox:!1,id:14,children:[{ifBox:!1,ifShow:!1,id:862,name:"店1",gate:[{ifBox:!1,id:9632,name:"出入100"},{ifBox:!1,id:2586,name:"出入200"},{ifBox:!1,id:3648,name:"出入300"}]},{ifBox:!1,ifShow:!1,id:756,name:"店2",gate:[{ifBox:!1,id:9654,name:"出入101"},{ifBox:!1,id:87642,name:"出入202"},{ifBox:!1,id:72131,name:"出入303"}]},{ifBox:!1,ifShow:!1,name:"店3",id:832154,gate:[{ifBox:!1,id:96348,name:"出入1010"},{ifBox:!1,id:7422,name:"出入2020"},{ifBox:!1,id:1235,name:"出入3030"}]}]}]},{name:"购物中心2",id:2,ifBox:!1,ifShow:!1,children:[{name:"楼层111",ifBox:!1,id:79512,ifShow:!1,children:[{ifBox:!1,ifShow:!1,id:8126,name:"店987",gate:[{ifBox:!1,id:845326,name:"出入963"},{ifBox:!1,id:7412,name:"出入369"},{ifBox:!1,id:123586,name:"出入852"}]},{ifBox:!1,ifShow:!1,name:"店1669",id:81235,gate:[{ifBox:!1,id:624,name:"出入101"},{ifBox:!1,id:3324,name:"出入202"},{ifBox:!1,id:441,name:"出入303"}]},{ifBox:!1,ifShow:!1,name:"店3",id:6446,gate:[{ifBox:!1,id:666,name:"出入1010"},{ifBox:!1,id:668,name:"出入2020"},{ifBox:!1,id:336,name:"出入3030"}]}]},{name:"楼层222",ifShow:!1,id:8237,ifBox:!1,children:[{ifBox:!1,ifShow:!1,name:"店1",id:552,gate:[{ifBox:!1,id:255,name:"出入100"},{ifBox:!1,id:36455,name:"出入200"},{ifBox:!1,id:785421,name:"出入300"}]},{ifBox:!1,ifShow:!1,name:"店2",id:962,gate:[{ifBox:!1,id:998,name:"出入101"},{ifBox:!1,id:987,name:"出入202"},{ifBox:!1,id:952,name:"出入303"}]},{ifBox:!1,ifShow:!1,name:"店3",id:814,gate:[{ifBox:!1,id:836,name:"出入1010"},{ifBox:!1,id:8001,name:"出入2020"},{ifBox:!1,id:8011,name:"出入3030"}]}]},{name:"楼层333",ifShow:!1,id:412,ifBox:!1,children:[{ifBox:!1,ifShow:!1,name:"店1",id:63,gate:[{ifBox:!1,id:968,name:"出入100"},{ifBox:!1,id:343,name:"出入200"},{id:252,ifBox:!1,name:"出入300"}]},{ifBox:!1,ifShow:!1,name:"店2",id:121,gate:[{ifBox:!1,id:223,name:"出入101"},{ifBox:!1,id:332,name:"出入202"},{ifBox:!1,id:515,name:"出入303"}]},{ifBox:!1,ifShow:!1,name:"店3",id:8587,gate:[{ifBox:!1,id:4321,name:"出入1010"},{ifBox:!1,id:15963,name:"出入2020"},{ifBox:!1,id:75321,name:"出入3030"}]}]}]},{name:"购物中心1",id:3,ifBox:!1,ifShow:!1}]}},computed:{showText:function(){var t=[];return this.listTest.forEach(function(e){t.push(e.name)}),t.join(" , ")}},created:function(){this.refreshData()},methods:{refreshData:function(t){var e=this;Object(u["b"])({id:1,entity:52}).then(function(t){e.handleListData(t.data.data)}).catch(function(t){console.log(t)})},showList:function(){this.showSelect=!this.showSelect},selectName:function(t){var e=this;if(0==e.list1[t].ifBox){e.list1[t].ifBox=!0;var i={};i.name=e.list1[t].name,i.id=e.list1[t].id,e.listTest.push(i)}else e.list1[t].ifBox=!1,e.listTest=f.a.remove(e.listTest,function(i){return i.id!=e.list1[t].id})},handleListData:function(t){var e=this;t.forEach(function(t){t.ifBox=!1,t.ifShow=!1,t.children&&e.handleListData(t.children)}),this.list1=t},shoppingName:function(t,e){var i=this;if(0==i.list1[t].children[e].ifBox){i.list1[t].children[e].ifBox=!0;var n={};n.name=i.list1[t].children[e].name,n.id=i.list1[t].children[e].id,i.listTest.push(n)}else i.list1[t].children[e].ifBox=!1,i.listTest=f.a.remove(i.listTest,function(n){return n.id!=i.list1[t].children[e].id})},floorName:function(t,e,i){var n=this;if(0==n.list1[t].children[e].children[i].ifBox){n.list1[t].children[e].children[i].ifBox=!0;var a={};a.name=n.list1[t].children[e].children[i].name,a.id=n.list1[t].children[e].children[i].id,n.listTest.push(a)}else n.list1[t].children[e].children[i].ifBox=!1,n.listTest=f.a.remove(n.listTest,function(a){return a.id!=n.list1[t].children[e].children[i].id})},inAndOutName:function(t,e,i,n){var a=this;if(0==a.list1[t].children[e].children[i].gate[n].ifBox){a.list1[t].children[e].children[i].gate[n].ifBox=!0;var o={};o.name=a.list1[t].children[e].children[i].gate[n].name,o.id=a.list1[t].children[e].children[i].gate[n].id,a.listTest.push(o)}else a.list1[t].children[e].children[i].gate[n].ifBox=!1,a.listTest=f.a.remove(a.listTest,function(o){return o.id!=a.list1[t].children[e].children[i].gate[n].id})},mouseoveList:function(t){this.list1[t].ifShow=!0},mouseoutList:function(t){this.list1[t].ifShow=!1},mouseoveShopping:function(t,e){this.list1[t].children[e].ifShow=!0},mouseoutShopping:function(t,e){this.list1[t].children[e].ifShow=!1},mouseoveFloor:function(t,e,i){this.list1[t].children[e].children[i].ifShow=!0},mouseoutFloor:function(t,e,i){this.list1[t].children[e].children[i].ifShow=!1},queryData:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){this.showSelect=!1,this.$emit(queryData,this.listTest)})},watch:{listTest:function(t,e){this.$emit("onChange",t)}}},d=h,m=(i("f829"),i("2877")),p=Object(m["a"])(d,s,c,!1,null,"32448133",null),x=p.exports,v=i("c1df"),g=i.n(v),y=i("d4a6"),b={name:"rate_page",components:{homeRanking:o["a"],iDatePicker:r["a"],selectList:x,flowSelector:y["a"]},data:function(){return{homeName:"ranking",orderName:"客流",chartType:"pie",range:[]}},mounted:function(){this.$refs.selector.compareType="entity",this.$refs.selector.entityType="floor";var t=new Date;t=t.setDate(t.getDate()-1);var e=[g()(t).format("YYYY-MM-DD"),g()(t).format("YYYY-MM-DD")];this.range=e},methods:{handelChange:function(t){var e=this;if(t.date1Array.length)if(!this.$store.state.home.headerAction||t.entitys.length){t.entitys=_.remove(t.entitys,function(t){return 0!=t.id}),this.$nextTick(function(){e.$refs.ranking.entitysCompareReq(t.date1Array,t.entitys)});try{var i,n=t.date1Array[0]+","+t.date1Array[1];t.entitys.forEach(function(t){i=t.belongsType?t.belongsType:""}),window.TDAPP.onEvent(this.$route.meta.pageTitle+"页面","数据查询",{"时间段":n,"实体选择":i})}catch(a){console.log(this.$route.meta.pageTitle+"页面-数据查询埋点error:"+a)}}else alert("请选择实体");else alert("请选择日期")}}},B=b,w=(i("4618"),i("01a1"),Object(m["a"])(B,n,a,!1,null,"f36741ba",null));e["default"]=w.exports},bf90:function(t,e,i){var n=i("36c3"),a=i("bf0b").f;i("ce7e")("getOwnPropertyDescriptor",function(){return function(t,e){return a(n(t),e)}})},c66f:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex justify-between items-center mr-10"},[i("span",{staticClass:"whitespace-no-wrap mx-4 text-sm"},[t._v("数据指标:")]),i("vs-select",{key:"chartSelector",staticClass:"chartSelector",attrs:{autocomplete:"",multiple:t.multiple,"max-selected":2},model:{value:t.typeArr,callback:function(e){t.typeArr=e},expression:"typeArr"}},t._l(t.selectList,function(t,e){return i("vs-select-item",{key:e,attrs:{text:t.name,value:t.value}})}),1)],1)},a=[],o=i("32d8"),r=i.n(o),s=i("a745"),c=i.n(s),l=(i("c5f6"),{name:"indicatorSelectort",props:{selectList:{type:Array,default:function(){return[{value:"enter",name:"入客流"},{value:"exit",name:"出客流"},{value:"areaEffect",name:"坪效"},{value:"buyRate",name:"成交率"},{value:"rebuyRate",name:"复购率"}]}},multiple:{type:Boolean,default:!0},defaultValue:{type:String,default:"enter"},maxSelected:{type:Number,default:2}},created:function(){this.defaultValue&&(this.typeArr=[this.defaultValue])},data:function(){return{typeArr:["enter"]}},watch:{typeArr:function(t,e){c()(t)||(t=r()(t)),this.$emit("input",t)},multiple:function(t){this.typeArr=t?[this.defaultValue]:this.defaultValue}}}),f=l,u=(i("470b"),i("2877")),h=Object(u["a"])(f,n,a,!1,null,null,null);e["a"]=h.exports},cebc:function(t,e,i){"use strict";var n=i("268f"),a=i.n(n),o=i("e265"),r=i.n(o),s=i("a4bb"),c=i.n(s),l=i("85f2"),f=i.n(l);function u(t,e,i){return e in t?f()(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function h(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=c()(i);"function"===typeof r.a&&(n=n.concat(r()(i).filter(function(t){return a()(i,t).enumerable}))),n.forEach(function(e){u(t,e,i[e])})}return t}i.d(e,"a",function(){return h})},d641:function(t,e,i){},e265:function(t,e,i){t.exports=i("ed33")},e44b:function(t,e,i){},e4be:function(t,e,i){"use strict";var n=i("d641"),a=i.n(n);a.a},ed33:function(t,e,i){i("014b"),t.exports=i("584a").Object.getOwnPropertySymbols},f829:function(t,e,i){"use strict";var n=i("505b"),a=i.n(n);a.a},fb37:function(t,e,i){"use strict";var n=i("e44b"),a=i.n(n);a.a},fde4:function(t,e,i){i("bf90");var n=i("584a").Object;t.exports=function(t,e){return n.getOwnPropertyDescriptor(t,e)}}}]);