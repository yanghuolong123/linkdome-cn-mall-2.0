(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2ebcc798"],{"25ea":function(t,e,a){},"36af":function(t,e,a){},"49aa":function(t,e,a){t.exports=a.p+"img/cross-enter3.b05d0824.jpg"},"582b":function(t,e,a){t.exports=a.p+"img/total.92d9dbc6.jpg"},"5fe9":function(t,e,a){"use strict";function s(t,e){return void 0===e&&(e=12),+parseFloat(t.toPrecision(e))}function i(t){var e=t.toString().split(/[eE]/),a=(e[0].split(".")[1]||"").length-+(e[1]||0);return a>0?a:0}function r(t){if(-1===t.toString().indexOf("e"))return Number(t.toString().replace(".",""));var e=i(t);return e>0?s(t*Math.pow(10,e)):t}function n(t){f&&(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER)&&console.warn(t+" is beyond boundary when transfer to integer, the results may not be accurate")}function o(t,e){for(var a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];if(a.length>0)return o.apply(void 0,[o(t,e),a[0]].concat(a.slice(1)));var c=r(t),l=r(e),u=i(t)+i(e),d=c*l;return n(d),d/Math.pow(10,u)}function c(t,e){for(var a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];if(a.length>0)return c.apply(void 0,[c(t,e),a[0]].concat(a.slice(1)));var r=Math.pow(10,Math.max(i(t),i(e)));return(o(t,r)+o(e,r))/r}function l(t,e){for(var a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];if(a.length>0)return l.apply(void 0,[l(t,e),a[0]].concat(a.slice(1)));var r=Math.pow(10,Math.max(i(t),i(e)));return(o(t,r)-o(e,r))/r}function u(t,e){for(var a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];if(a.length>0)return u.apply(void 0,[u(t,e),a[0]].concat(a.slice(1)));var c=r(t),l=r(e);return n(c),n(l),o(c/l,Math.pow(10,i(e)-i(t)))}function d(t,e){var a=Math.pow(10,e);return u(Math.round(o(t,a)),a)}Object.defineProperty(e,"__esModule",{value:!0});var f=!0;function p(t){void 0===t&&(t=!0),f=t}var m={strip:s,plus:c,minus:l,times:o,divide:u,round:d,digitLength:i,float2Fixed:r,enableBoundaryChecking:p};e.strip=s,e.plus=c,e.minus=l,e.times=o,e.divide=u,e.round=d,e.digitLength=i,e.float2Fixed=r,e.enableBoundaryChecking=p,e["default"]=m},"63d9":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("vx-card",{staticClass:"headline",attrs:{title:t.tableTitle}},[a("vs-table",{attrs:{data:t.tableList,noDataText:t.name},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.data;return t._l(s,function(e,i){return a("vs-tr",{key:i},[s[i].name?a("vs-td",{attrs:{data:s[i].name}},[t._v("\n          "+t._s(s[i].name)+"\n        ")]):t._e(),s[i].type?a("vs-td",{attrs:{data:s[i].type}},[t._v("\n          "+t._s(s[i].type)+"\n        ")]):t._e(),s[i].time?a("vs-td",{attrs:{data:s[i].time}},[t._v("\n          "+t._s(s[i].time)+"\n        ")]):t._e(),s[i].avg?a("vs-td",{attrs:{data:s[i].avg}},[t._v("\n          "+t._s(s[i].avg)+"\n        ")]):t._e(),s[i].enter?a("vs-td",{attrs:{data:s[i].enter}},[t._v("\n          "+t._s(s[i].enter)+"\n        ")]):t._e(),s[i].percent?a("vs-td",{attrs:{data:s[i].percent}},[t._v("\n          "+t._s(s[i].percent)+"%\n        ")]):t._e(),t._l(s[i].percentList,function(e,r){return s[i].percentList?a("vs-td",{key:r,attrs:{data:s[i].percentList}},[t._v("\n          "+t._s(e)+"\n        ")]):t._e()})],2)})}}])},[a("template",{slot:"thead"},t._l(t.tableName,function(e,s){return a("vs-th",{key:s,staticClass:"table-title"},[t._v(t._s(e))])}),1)],2)],1)},i=[],r={name:"dwell-time-table",props:{tableTitle:{type:String,default:""},tableName:{type:Array,default:[]},tableList:{type:Array,default:[]}},data:function(){return{name:"暂无数据"}}},n=r,o=(a("99d7"),a("2877")),c=Object(o["a"])(n,s,i,!1,null,null,null);e["a"]=c.exports},"7f61":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{position:"relative"}},[[a("Card",{staticClass:"selectorbox"},[a("div",[a("div",{staticClass:"cross-picker"},[a("DatePicker",{staticStyle:{width:"230px",float:"left"},attrs:{type:"daterange",placement:"bottom-end",options:t.disabledDate,placeholder:"选择日期"},model:{value:t.crossDate,callback:function(e){t.crossDate=e},expression:"crossDate"}}),a("vs-select",{staticClass:"selectExample",attrs:{autocomplete:""},model:{value:t.selectType,callback:function(e){t.selectType=e},expression:"selectType"}},t._l(t.typeList,function(t,e){return a("vs-select-item",{key:e,attrs:{value:t.value,text:t.text}})}),1),1==t.selectType?a("DatePicker",{staticStyle:{width:"230px",float:"left","margin-left":"30px"},attrs:{type:"daterange",placement:"bottom-end",placeholder:"选择日期",options:t.disabledDate},model:{value:t.crossDateTwo,callback:function(e){t.crossDateTwo=e},expression:"crossDateTwo"}}):t._e()],1),a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("div",{staticClass:"cascade"},[a("el-cascader",{staticClass:"cascade-dom",attrs:{placeholder:"选择起点","popper-class":"cascade-dom",props:{multiple:!0,checkStrictly:!0},options:t.startList},on:{change:function(e){t.cascaderChange("startValue")}},model:{value:t.startValue,callback:function(e){t.startValue=e},expression:"startValue"}})],1),a("div",{staticClass:"cascade"},[a("el-cascader",{staticClass:"cascade-dom",attrs:{"popper-class":"cascade-dom",placeholder:"选择终点",props:{multiple:!0,checkStrictly:!0},options:t.endList},on:{change:function(e){t.cascaderChange("endValue")}},model:{value:t.endValue,callback:function(e){t.endValue=e},expression:"endValue"}})],1),a("div",{staticClass:"cross-submit",on:{click:t.paramsPrepare}},[t._v("查询")]),a("div",{staticClass:"cross-reset",on:{click:t.resetData}},[t._v("重置")])])])])],a("div",{staticClass:"cross_analysis_time"},t._l(t.timeList,function(e,s){return a("div",{key:s},[a("img",{attrs:{src:e.icon,alt:""}}),a("div",{staticClass:"tootipsTitle"},[a("p",{staticClass:"cross_time_name"},[t._v(t._s(e.name))]),a("p",{staticClass:"titles"},[a("Tooltip",{attrs:{content:e.tootipText,placement:"bottom",theme:"light",transfer:"","max-width":"600"}},[a("icons",{attrs:{type:"wenhao"}})],1)],1)]),a("p",{staticClass:"cross_time_data"},[a("span",[t._v(t._s(t.showTimeOne))]),t._v(" "+t._s(e.data))]),1==t.selectType?a("p",{staticClass:"scale-data",class:{scaleAction:e.isActive}},[a("span",[t._v(t._s(t.showTimeTwo))]),e.isActive?a("Icon",{attrs:{type:"md-arrow-dropup"}}):a("Icon",{attrs:{type:"md-arrow-dropdown"}}),t._v("\n        "+t._s(e.contrast)+" %\n      ")],1):t._e()])})),0==t.selectType?a("div",{staticClass:"cross_analysis"},[t.noData?a("p",{staticClass:"noData"},[t._v("暂无数据")]):t._e(),t._m(0),t._m(1),a("div",{staticClass:"progress-title"},[t._l(t.maxEnterList,function(e,s){return a("div",{key:s,staticClass:"progress-text"},[a("p",[t._v(t._s(e.name))]),a("span",[t._v("累计客流"+t._s(e.data)+"人")])])}),a("div",{staticStyle:{clear:"both"}}),a("div",{staticClass:"progress-center",style:{left:t.marginLeft+"%"}},[t._v("\n        转化率"+t._s(t.percentData)+"%\n      ")]),a("div",{staticClass:"arrows"})],2),a("vs-progress",{attrs:{percent:t.percentData,height:10,color:"#A2DAF4"}}),t.isGraph?a("vChart",{ref:"graphChart",staticStyle:{width:"115%!important",height:"600px"},attrs:{options:t.polar}}):t._e()],1):t._e(),a("div",{staticClass:"cross_analysis"},[t._m(2),a("div",{staticClass:"dwell-time-icon"},[a("vs-select",{staticClass:"selectExample",attrs:{autocomplete:""},on:{change:t.selectLineType},model:{value:t.lineType,callback:function(e){t.lineType=e},expression:"lineType"}},t._l(t.lineTypeList,function(t,e){return a("vs-select-item",{key:e,attrs:{value:t.value,text:t.text}})}),1),t._l(t.iconList,function(e,s){return a("span",{key:s,on:{click:function(e){t.iconClick(s)}}},[a("icons",{attrs:{title:t.iconTitle[e.type],type:e.type,size:20,color:t.iconIndex===s?t.iconColor:"#9D9D9DFF"}})],1)})],2),a("div",{staticStyle:{height:"415px",overflow:"hidden"}},[a("div",{staticClass:"line-show",class:{crossLineActive:0==t.iconIndex}},[t.lineNoData?a("p",{staticClass:"noData"},[t._v("暂无数据")]):t._e(),t.isLine?a("vue-apex-charts",{ref:"lineChart",staticClass:"chartLine",class:{crossLineChart:0==t.lineType},attrs:{width:"100%",height:"400",id:"siteTraffic",options:t.siteTraffic.chartOptions,series:t.siteTraffic.series}}):t._e(),t.isLine?a("vue-apex-charts",{ref:"lineChartAvg",staticClass:"chartLine",class:{crossLineChartAvg:1==t.lineType},attrs:{width:"100%",height:"400",id:"siteTrafficAvg",options:t.siteTrafficAvg.chartOptions,series:t.siteTrafficAvg.series}}):t._e()],1),a("div",{staticClass:"cross-table-line",class:{crossTableActive:1==t.iconIndex}},[a("table-default",{attrs:{tableName:t.tableName,tableList:t.tableList}})],1)])]),t.isAlert?a("alert",{attrs:{alertText:t.alertText},on:{closeAlert:t.closeAlert,alertConfirm:t.closeAlert}}):t._e()],2)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cross_analysis_title"},[a("p",[t._v("交叉客流路径")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cross_analysis_title",staticStyle:{"margin-top":"30px"}},[a("p",[t._v("最大客流路径")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cross_analysis_title"},[a("p",[t._v("数据指标趋势")])])}],r=a("768b"),n=a("e814"),o=a.n(n),c=(a("c5f6"),a("ac6a"),a("28a5"),a("6762"),a("2fdb"),a("7f7f"),a("d4a6")),l=a("1321"),u=a.n(l),d=a("ad00"),f=a("94b0"),p=a("63d9"),m=a("2dc0"),h=a("c1df"),v=a.n(h),g=a("5fe9"),D=a.n(g),y=a("2ef0"),x=a.n(y),b=a("c276"),T={name:"Cross",components:{flowSelector:c["a"],VueApexCharts:u.a,TableDefault:p["a"],alert:m["a"],vChart:VueECharts},data:function(){var t=this;return{selectType:0,noData:!0,lineNoData:!0,showTimeOne:"",showTimeTwo:"",typeList:[{text:"无对比",value:0},{text:"时间对比",value:1}],isGraph:!1,isLine:!1,percentData:0,marginLeft:0,lineType:0,lineTypeList:[{text:"客流转化深度",value:0}],tableList:[],tableName:["时间","客流量"],iconList:[{type:"zhexiantu",color:"#9D9D9DFF"},{type:"biaoge-copy",color:"#9D9D9DFF"}],iconTitle:{zhexiantu:"折线图","biaoge-copy":"详细数据"},iconIndex:0,iconColor:"rgb(34, 128, 215)",maxEnterList:[{name:" ",data:0},{name:" ",data:0}],timeList:[{icon:a("582b"),name:"起点累计客流",data:"",contrast:"",isActive:!0,tootipText:"为起点所有实体的客流之和"},{icon:a("b103"),name:"客流转化深度",data:"",contrast:"",isActive:!0,tootipText:"进入起点的人去目的实体的平均游逛深度"},{icon:a("aa30"),name:"转化客流量",data:"",contrast:"",isActive:!0,tootipText:"所有从起点实体到终点实体的客流总和"},{icon:a("49aa"),name:"平均客流转化时长",data:"",contrast:"",isActive:!0,tootipText:"顾客从起点到终点的滞留时长"}],polar:{title:{},tooltip:{trigger:"item",triggerOn:"mousemove",formatter:function(t){if(t.data.source)return t.data.source+" - "+t.data.target+": "+t.data.slewRate+"%"}},color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],series:[{type:"sankey",data:[],links:[],focusNodeAdjacency:"allEdges",itemStyle:{normal:{borderWidth:1,borderColor:"#aaa"}},lineStyle:{normal:{color:"source",curveness:.5}}}],animationDuration:2e3},siteTraffic:{series:[{name:"客流转化深度",data:[]}],chartOptions:{chart:{toolbar:{show:!1},type:"line"},stroke:{curve:"straight",width:2},markers:{size:4,hover:{size:5}},xaxis:{labels:{style:{cssClass:"text-grey fill-current"},offsetX:0},axisTicks:{show:!1},categories:[],axisBorder:{show:!1}},yaxis:{title:{text:"客流转化深度(%)"}},tooltip:{y:{formatter:function(t){return t+"%"}}}}},siteTrafficAvg:{series:[{name:"平均客流转换时长",data:[]}],chartOptions:{chart:{toolbar:{show:!1}},stroke:{curve:"smooth",width:2},legend:{show:!1},markers:{size:4,hover:{size:5}},xaxis:{labels:{style:{cssClass:"text-grey fill-current"}},axisTicks:{show:!1},categories:[],axisBorder:{show:!1}},yaxis:{title:{text:"平均客流转换时长"},labels:{show:!0,formatter:function(e){return t.dateTiem(e)}}},tooltip:{y:{formatter:function(e){return t.dateTiem(e)}}}}},crossDate:[],startValue:[],crossDateTwo:[],startList:[],endValue:[],endList:[],isAlert:!1,allData:"",alertText:{title:"",text:"",bg:"",confirm:!1},disabledDate:""}},computed:{fromBzid:function(){return this.startValue.map(function(t){return t[1]}).flat()},toBzid:function(){return this.endValue.map(function(t){return t[1]}).flat()}},created:function(){this.disabledDate=b["b"]},watch:{"$store.state.home.headerAction":function(){this.resetData();var t=this.$router.currentRoute.name;"Cross"===t&&this.allZoneList()}},mounted:function(){this.isGraph=!0,this.isLine=!0,window.onresize=this.onResize;var t=new Date;t=t.setDate(t.getDate()-1);var e=[v()(t).format("YYYY-MM-DD"),v()(t).format("YYYY-MM-DD")];this.crossDate=e,this.crossDateTwo=e,this.allZoneList()},beforeDestroy:function(){window.removeEventListener("resize",this.onResize)},methods:{cascaderChange:function(t){var e=this;function a(a){"floor"!==a.itype&&(a.disabled="startValue"===t?e.fromBzid.includes(a.id):e.toBzid.includes(a.id))}"startValue"===t?Object(b["a"])(this.endList,"children",a):Object(b["a"])(this.startList,"children",a)},onResize:function(){this.isGraph&&this.$refs.graphChart.resize(),this.$refs.lineChart.resize(),this.$refs.lineChartAvg.resize()},paramsPrepare:function(){var t,e,a;if(0===this.startValue.length)return this.alert("起点不能为空，请选择起点"),!1;if(0===this.endValue.length)return this.alert("终点不能为空，请选择终点"),!1;if(this.iconIndex=0,t=v()(this.crossDate[0]).format("YYYY-MM-DD")+","+v()(this.crossDate[1]).format("YYYY-MM-DD"),this.showTimeOne=v()(this.crossDate[0]).format("YYYY-MM-DD")+" - "+v()(this.crossDate[1]).format("YYYY-MM-DD"),0===this.selectType)e="",this.showTimeTwo="",a=this.gotInnerRange(t.split(","));else{e=v()(this.crossDateTwo[0]).format("YYYY-MM-DD")+","+v()(this.crossDateTwo[1]).format("YYYY-MM-DD"),this.showTimeTwo=v()(this.crossDateTwo[0]).format("YYYY-MM-DD")+" - "+v()(this.crossDateTwo[1]).format("YYYY-MM-DD");var s=this.gotInnerRange(t.split(",")),i=this.gotInnerRange(e.split(","));a="Month"==s||"Month"==i?"Month":"Date"}this.lineType=0,this.isLine=!0,this.crossDataList(t,e,this.fromBzid.join(","),this.toBzid.join(","),a);try{var r=0===this.selectType?"无对比":"时间对比",n=e?[t,e]:t,o=this.getCascadeData(this.startValue,this.startList),c=this.getCascadeData(this.endValue,this.endList);window.TDAPP.onEvent(this.$route.meta.pageTitle+"页面","数据查询",{"时间段":n,"对比方式":r,"起点实体":o.join(","),"终点实体":c.join(",")})}catch(l){console.log(this.$route.meta.pageTitle+"页面-数据查询埋点error:"+l)}},getCascadeData:function(t,e){var a=[];return t.map(function(t){e.map(function(e){e.id==t[0]&&e.children.map(function(s){s.id==t[1]&&a.push(e.label+"/"+s.label)})})}),a},crossDataList:function(t,e,a,s,i){var r=this;Object(f["d"])({time1:t,time2:e,from_bzid:a,to_bzid:s,range:i}).then(function(t){var e=t.data.data;r.crossTitleData(e),0===r.selectType&&r.crossGraphData(e),r.allData=e,r.lineData(e,i),r.avgDuration(e,i)}).catch(function(t){console.log(t)})},formatCascadeAuthData:function(t){this.startList=x.a.compact(Object(b["c"])(t,this.$store.state.user.role_id,this.$store.state.user.checklist)),this.startList=this.startList[0]&&this.startList[0].children,this.startList.forEach(function(t){t.disabled=!0});for(var e=0;e<this.startList.length;e++)this.startList[e].children&&this.startList[e].children.length||(this.startList.splice(e,1),e--);this.endList=x.a.cloneDeep(this.startList)},allZoneList:function(){var t=this;Object(d["b"])({entity:52}).then(function(e){var a=e.data.data.filter(function(e){return e.property_id===t.$store.state.home.headerAction});t.formatCascadeAuthData(a)}).catch(function(t){console.log(t)})},crossTitleData:function(t){var e=this,a=x.a.cloneDeep(t.matrixList);a=x.a.uniqBy(a,"source"),e.timeList[0].data=x.a.sumBy(a,function(t){return t.realFlow}).toLocaleString();var s=t.compareRateLPF?t.compareRateLPF:0;e.timeList[0].contrast=D.a.times(Number(s),100),e.timeList[0].isActive=s>=0,e.timeList[1].data=D.a.times(Number(t.passengerConverRate),100)+"%";var i=t.compareRatePCR?t.compareRatePCR:0;e.timeList[1].contrast=D.a.times(Number(i),100),e.timeList[1].isActive=i>=0,e.timeList[2].data=t.converPassengerFlow.toLocaleString();var r=t.compareRateCPF?t.compareRateCPF:0;e.timeList[2].contrast=D.a.times(Number(r),100),e.timeList[2].isActive=r>=0,e.timeList[3].data=e.dateTiem(t.avgTranTime);var n=t.compareRateATT?t.compareRateATT:0;e.timeList[3].contrast=D.a.times(Number(n),100),e.timeList[3].isActive=n>=0},crossGraphData:function(t){var e=this;e.polar.series[0].data=[];var a={data:0,name:""},s={data:0,name:""},i=[];e.polar.series[0].links=[],t.matrixList.map(function(t){if(0!==t.value){i.push(t.source),i.push(t.target);var a={};a.source=t.source,a.target=t.target;var s=D.a.divide(t.value,t.realFlow).toFixed(3);a.value=t.value,a.slewRate=Number(D.a.times(s,100)),a.realFlow=t.realFlow,e.polar.series[0].links.push(a)}}),e.polar.series[0].links.map(function(t){t.value>a.data&&(a.data=t.value,a.name=t.target,s.name=t.source,s.data=t.realFlow)}),i=x.a.uniq(i),i.map(function(t){var a={};a.name=t,e.polar.series[0].data.push(a)}),e.maxEnterList=[],e.maxEnterList.push(s),e.maxEnterList.push(a);var r=Number((e.maxEnterList[1].data/e.maxEnterList[0].data).toFixed(3));if(x.a.isNaN(r))e.percentData=0,e.marginLeft=0;else{var n=D.a.times(Number(r),100);e.percentData=n,n<5?e.marginLeft=0:n>5||n<95?e.marginLeft=n-3:n>95&&(e.marginLeft=95)}e.polar.series[0].links.map(function(t){0===t.value?e.noData=!0:e.noData=!1}),e.maxEnterList.map(function(t){t.data=t.data.toLocaleString()})},selectLineType:function(t){var e=this;this.iconIndex=0;var a=this.allData;0===t?(e.tableList=[],e.tableName=["时间","客流转化深度"],a.everyDateConvrRate.map(function(t){t.data.map(function(a){var s={};s.time=t.name+" ( "+a.date+" )",s.avg=D.a.times(Number(a.convetRate),100)+"%",e.tableList.push(s)})})):(e.tableList=[],e.tableName=["时间","平局客流转换时长"],a.everyDateAvgTranTime.map(function(t){t.data.map(function(a){var s={};s.time=t.name+" ( "+a.date+" )",s.avg=e.dateTiem(a.avgConverTime),e.tableList.push(s)})}))},lineData:function(t,e){var a=this;a.siteTraffic.series=[],a.siteTraffic.chartOptions.xaxis.categories=[],a.tableList=[],a.tableName=["时间","客流转化深度"],t.everyDateConvrRate.map(function(t,e){var s={};s.name=t.name,s.data=[],t.data.map(function(i,r){s.data.push(D.a.times(Number(i.convetRate),100));var n={};if(0===e){var o=v()(a.crossDate[0]).format("YYYY-MM-DD"),c=v()(a.crossDate[1]).format("YYYY-MM-DD");n.time=o===c?i.date:t.name+"("+i.date+")"}else{o=v()(a.crossDateTwo[0]).format("YYYY-MM-DD"),c=v()(a.crossDateTwo[1]).format("YYYY-MM-DD");n.time=o===c?i.date:t.name+"("+i.date+")"}n.avg=D.a.times(Number(i.convetRate),100)+"%",a.tableList.push(n)}),a.siteTraffic.series.push(s),a.lineNoData=!1});var s,i,r=a.selectType,n=t.everyDateConvrRate[0].data;s=t.everyDateConvrRate[1]?t.everyDateConvrRate[1].data:[],i=n.length>s.length?n:s,i.map(function(t,s){var i,n,o=Number(s)+1;n="Month"==e?"月":"天";var c="第"+o+n;i=0===r?t.date:c,a.siteTraffic.chartOptions.xaxis.categories.push(i)}),a.$refs.lineChart.updateOptions({xaxis:{categories:a.siteTraffic.chartOptions.xaxis.categories}});var o=v()(this.crossDate[0]).format("YYYY-MM-DD"),c=v()(this.crossDate[1]).format("YYYY-MM-DD"),l=v()(this.crossDateTwo[0]).format("YYYY-MM-DD"),u=v()(this.crossDateTwo[1]).format("YYYY-MM-DD"),d=document.getElementById("siteTraffic").offsetWidth,f=Math.round(d/2*100)/100-50;0==r?o==c?a.lineXaxisType(f,!1):a.lineXaxisType(0,!0):o==c&&l==u?a.lineXaxisType(f,!1):a.lineXaxisType(0,!0)},avgDuration:function(t,e){var a=this;a.siteTrafficAvg.series=[],a.siteTrafficAvg.chartOptions.xaxis.categories=[],t.everyDateAvgTranTime.map(function(t){var e={};e.name=t.name,e.data=[],t.data.map(function(t){e.data.push(t.avgConverTime)}),a.siteTrafficAvg.series.push(e)}),a.lineNoData=!1;var s,i,r=a.selectType,n=t.everyDateConvrRate[0].data;s=t.everyDateConvrRate[1]?t.everyDateConvrRate[1].data:[],i=n.length>s.length?n:s,i.map(function(t,s){var i,n,o=Number(s)+1;n="Month"==e?"月":"天";var c="第"+o+n;i=0===r?t.date:c,a.siteTrafficAvg.chartOptions.xaxis.categories.push(i)}),a.$refs.lineChartAvg.updateOptions({xaxis:{categories:a.siteTrafficAvg.chartOptions.xaxis.categories}});var o=v()(this.crossDate[0]).format("YYYY-MM-DD"),c=v()(this.crossDate[1]).format("YYYY-MM-DD"),l=v()(this.crossDateTwo[0]).format("YYYY-MM-DD"),u=v()(this.crossDateTwo[1]).format("YYYY-MM-DD"),d=document.getElementById("siteTrafficAvg").offsetWidth,f=Math.round(d/2*100)/100-50;0==r?o==c?a.avgLineXaxisType(f,!1):a.avgLineXaxisType(0,!0):o==c&&l==u?a.avgLineXaxisType(f,!1):a.avgLineXaxisType(0,!0)},selectStart:function(t){var e=this;e.endList.map(function(t){t.action=!1}),t.map(function(t){e.endList.map(function(e){t===e.value&&(e.action=!0)})})},selectEnd:function(t){var e=this;e.startList.map(function(t){t.action=!1}),t.map(function(t){e.startList.map(function(e){t===e.value&&(e.action=!0)})})},closeAlert:function(){this.isAlert=!1},iconClick:function(t){this.iconIndex=t},alert:function(t){this.isAlert=!0,this.alertText.bg="#00A0E9",this.alertText.title="交叉客流",this.alertText.text=t,this.alertText.confirm=!1},dateTiem:function(t){var e,a,s=o()(t);return s>=60&&(e=o()(s/60),s=o()(s%60),e>=60&&(a=o()(e/60),e=o()(e%60))),s=s>0?s<10?"0"+o()(s):o()(s):"00",e=e>0?e<10?"0"+o()(e):o()(e):"00",a=a>0?a<10?"0"+o()(a):o()(a):"00",a+":"+e+":"+s},avgLineXaxisType:function(t,e){var a=this;a.siteTrafficAvg.chartOptions.xaxis.labels.offsetX=t,a.$refs.lineChartAvg.updateOptions({xaxis:{offsetX:a.siteTrafficAvg.chartOptions.xaxis.labels.offsetX}}),a.siteTrafficAvg.chartOptions.xaxis.axisBorder.show=e,a.$refs.lineChartAvg.updateOptions({xaxis:{show:a.siteTrafficAvg.chartOptions.xaxis.axisBorder.show}})},lineXaxisType:function(t,e){var a=this;a.siteTraffic.chartOptions.xaxis.labels.offsetX=t,a.$refs.lineChart.updateOptions({xaxis:{offsetX:a.siteTraffic.chartOptions.xaxis.labels.offsetX}}),a.siteTraffic.chartOptions.xaxis.axisBorder.show=e,a.$refs.lineChart.updateOptions({xaxis:{show:a.siteTraffic.chartOptions.xaxis.axisBorder.show}})},polarData:function(t){var e=[];return this.allData.matrixList.map(function(a){a.source==t&&e.push(a.value),a.target==t&&e.push(a.value)}),x.a.sum(e)},gotInnerRange:function(t){var e=Object(r["a"])(t,2),a=e[0],s=e[1],i=v()(a),n=v()(s),o=v.a.duration(n.diff(i)).asDays(),c="";return c=o<60?"Date":"Month",c},resetData:function(){var t=new Date;t=t.setDate(t.getDate()-1);var e=[v()(t).format("YYYY-MM-DD"),v()(t).format("YYYY-MM-DD")];this.crossDate=e,this.crossDateTwo=e,this.selectType=0,this.startValue=[],this.endValue=[],this.cascaderChange("startValue"),this.cascaderChange("endValue");try{window.TDAPP.onEvent(this.$route.meta.pageTitle+"页面","重置",{})}catch(a){console.log(this.$route.meta.pageTitle+"页面-重置-埋点error:"+a)}}}},_=T,L=(a("db9e"),a("d2cc"),a("2877")),w=Object(L["a"])(_,s,i,!1,null,"35baf44b",null);e["default"]=w.exports},"94b0":function(t,e,a){"use strict";a.d(e,"e",function(){return n}),a.d(e,"h",function(){return o}),a.d(e,"d",function(){return c}),a.d(e,"r",function(){return l}),a.d(e,"f",function(){return u}),a.d(e,"l",function(){return d}),a.d(e,"b",function(){return f}),a.d(e,"p",function(){return p}),a.d(e,"q",function(){return m}),a.d(e,"g",function(){return h}),a.d(e,"i",function(){return v}),a.d(e,"a",function(){return g}),a.d(e,"c",function(){return D}),a.d(e,"j",function(){return y}),a.d(e,"m",function(){return x}),a.d(e,"o",function(){return b}),a.d(e,"n",function(){return T}),a.d(e,"k",function(){return _});var s=a("66df"),i=a("4328"),r=a.n(i),n=function(t){return s["a"].request({url:"analysis/dateentityscompare",data:t,method:"post"})},o=function(t){var e=t.time1,a=t.time2,i=t.bzid;return s["a"].request({url:"dwelltime/chart",params:{time1:e,time2:a,bzid:i},method:"get"})},c=function(t){var e=t.time1,a=t.time2,i=t.from_bzid,r=t.to_bzid,n=t.range;return s["a"].request({url:"crossFlow/index",params:{time1:e,time2:a,from_bzid:i,to_bzid:r,range:n},method:"get"})},l=function(t){var e=t.bzid,a=t.time;return s["a"].request({url:"flow/assoc",params:{bzid:e,time:a},method:"get"})},u=function(t){var e=t.bzid,a=t.time;return s["a"].request({url:"cross/direction",params:{bzid:e,time:a},method:"get"})},d=function(t){return s["a"].request({url:"stat/entityFlowBatch",params:t,method:"get"})},f=function(t){return s["a"].request({url:"dict/industry",params:t,method:"get"})},p=function(t){var e=t.time1,a=t.time2,i=t.industry_id,r=t.property_id;return s["a"].request({url:"shop/enterRate/top",params:{time1:e,time2:a,industry_id:i,property_id:r},method:"get"})},m=function(t){var e=t.time1,a=t.time2,i=t.bzid,r=t.range;return s["a"].request({url:"shop/enterRate/trend",params:{time1:e,time2:a,bzid:i,range:r},method:"get"})},h=function(t){var e=t.time,a=t.bzid;return s["a"].request({url:"flow/drainage",params:{time:e,bzid:a},method:"get"})},v=function(t){var e=t.time,a=t.property_id;return s["a"].request({url:"flow/moving",params:{time:e,property_id:a},method:"get"})},g=function(t){var e=t.time,a=t.property_id,i=t.start,r=t.end,n=t.floor_id;return s["a"].request({url:"judge/keyPath",params:{time:e,property_id:a,start:i,end:r,floor_id:n},method:"get"})},D=function(t){var e=t.date,a=t.property_id;return s["a"].request({url:"manager/query_active_target",params:{date:e,property_id:a},method:"get"})},y=function(t,e,a,i){return s["a"].request({url:"passflow/visits",data:{bzid:t,start_time:e,end_time:a,innerRange:i},method:"post"})},x=function(t){var e=t.time,a=t.bzid,i=t.timeRange;return s["a"].request({url:"analysis/heat_map",data:r.a.stringify({time:e,bzid:a,timeRange:i}),method:"post"})},b=function(t){var e=t.bzid,a=t.type,i=t.time;return s["a"].request({url:"judge/getIsFloat",params:{bzid:e,type:a,time:i},method:"get"})},T=function(t){var e=t.property_id,a=t.type;return s["a"].request({url:"judge/getHKBzids",params:{property_id:e,type:a},method:"get"})},_=function(t){var e=t.time1,a=t.range,i=t.from_bzids,r=t.to_bzids;return s["a"].request({url:"cross/trend",params:{time1:e,range:a,from_bzids:i,to_bzids:r},method:"get"})}},"99d7":function(t,e,a){"use strict";var s=a("36af"),i=a.n(s);i.a},aa30:function(t,e,a){t.exports=a.p+"img/cross-enter1.7877c2c8.jpg"},b103:function(t,e,a){t.exports=a.p+"img/cross-enter.4bb0267c.jpg"},d2cc:function(t,e,a){"use strict";var s=a("d38f"),i=a.n(s);i.a},d38f:function(t,e,a){},db9e:function(t,e,a){"use strict";var s=a("25ea"),i=a.n(s);i.a}}]);