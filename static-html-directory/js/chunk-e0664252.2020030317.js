(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e0664252"],{"023b":function(t,e,a){"use strict";var i=a("80c3"),s=a.n(i);s.a},"13c8":function(t,e,a){var i=a("c3a1"),s=a("36c3"),r=a("355d").f;t.exports=function(t){return function(e){var a,n=s(e),o=i(n),c=o.length,l=0,p=[];while(c>l)r.call(n,a=o[l++])&&p.push(t?[a,n[a]]:n[a]);return p}}},1428:function(t,e,a){},"2d1f":function(t,e,a){t.exports=a("b606")},"36af":function(t,e,a){},"5fe9":function(t,e,a){"use strict";function i(t,e){return void 0===e&&(e=12),+parseFloat(t.toPrecision(e))}function s(t){var e=t.toString().split(/[eE]/),a=(e[0].split(".")[1]||"").length-+(e[1]||0);return a>0?a:0}function r(t){if(-1===t.toString().indexOf("e"))return Number(t.toString().replace(".",""));var e=s(t);return e>0?i(t*Math.pow(10,e)):t}function n(t){d&&(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER)&&console.warn(t+" is beyond boundary when transfer to integer, the results may not be accurate")}function o(t,e){for(var a=[],i=2;i<arguments.length;i++)a[i-2]=arguments[i];if(a.length>0)return o.apply(void 0,[o(t,e),a[0]].concat(a.slice(1)));var c=r(t),l=r(e),p=s(t)+s(e),u=c*l;return n(u),u/Math.pow(10,p)}function c(t,e){for(var a=[],i=2;i<arguments.length;i++)a[i-2]=arguments[i];if(a.length>0)return c.apply(void 0,[c(t,e),a[0]].concat(a.slice(1)));var r=Math.pow(10,Math.max(s(t),s(e)));return(o(t,r)+o(e,r))/r}function l(t,e){for(var a=[],i=2;i<arguments.length;i++)a[i-2]=arguments[i];if(a.length>0)return l.apply(void 0,[l(t,e),a[0]].concat(a.slice(1)));var r=Math.pow(10,Math.max(s(t),s(e)));return(o(t,r)-o(e,r))/r}function p(t,e){for(var a=[],i=2;i<arguments.length;i++)a[i-2]=arguments[i];if(a.length>0)return p.apply(void 0,[p(t,e),a[0]].concat(a.slice(1)));var c=r(t),l=r(e);return n(c),n(l),o(c/l,Math.pow(10,s(e)-s(t)))}function u(t,e){var a=Math.pow(10,e);return p(Math.round(o(t,a)),a)}Object.defineProperty(e,"__esModule",{value:!0});var d=!0;function h(t){void 0===t&&(t=!0),d=t}var f={strip:i,plus:c,minus:l,times:o,divide:p,round:u,digitLength:s,float2Fixed:r,enableBoundaryChecking:h};e.strip=i,e.plus=c,e.minus=l,e.times=o,e.divide=p,e.round=u,e.digitLength=s,e.float2Fixed=r,e.enableBoundaryChecking=h,e["default"]=f},"63d9":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("vx-card",{staticClass:"headline",attrs:{title:t.tableTitle}},[a("vs-table",{attrs:{data:t.tableList,noDataText:t.name},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.data;return t._l(i,function(e,s){return a("vs-tr",{key:s},[i[s].name?a("vs-td",{attrs:{data:i[s].name}},[t._v("\n          "+t._s(i[s].name)+"\n        ")]):t._e(),i[s].type?a("vs-td",{attrs:{data:i[s].type}},[t._v("\n          "+t._s(i[s].type)+"\n        ")]):t._e(),i[s].time?a("vs-td",{attrs:{data:i[s].time}},[t._v("\n          "+t._s(i[s].time)+"\n        ")]):t._e(),i[s].avg?a("vs-td",{attrs:{data:i[s].avg}},[t._v("\n          "+t._s(i[s].avg)+"\n        ")]):t._e(),i[s].enter?a("vs-td",{attrs:{data:i[s].enter}},[t._v("\n          "+t._s(i[s].enter)+"\n        ")]):t._e(),i[s].percent?a("vs-td",{attrs:{data:i[s].percent}},[t._v("\n          "+t._s(i[s].percent)+"%\n        ")]):t._e(),t._l(i[s].percentList,function(e,r){return i[s].percentList?a("vs-td",{key:r,attrs:{data:i[s].percentList}},[t._v("\n          "+t._s(e)+"\n        ")]):t._e()})],2)})}}])},[a("template",{slot:"thead"},t._l(t.tableName,function(e,i){return a("vs-th",{key:i,staticClass:"table-title"},[t._v(t._s(e))])}),1)],2)],1)},s=[],r={name:"dwell-time-table",props:{tableTitle:{type:String,default:""},tableName:{type:Array,default:[]},tableList:{type:Array,default:[]}},data:function(){return{name:"暂无数据"}}},n=r,o=(a("99d7"),a("2877")),c=Object(o["a"])(n,i,s,!1,null,null,null);e["a"]=c.exports},"7d6d":function(t,e,a){var i=a("63b6"),s=a("13c8")(!1);i(i.S,"Object",{values:function(t){return s(t)}})},"80c3":function(t,e,a){},8243:function(t,e,a){"use strict";var i=a("1428"),s=a.n(i);s.a},"94b0":function(t,e,a){"use strict";a.d(e,"e",function(){return n}),a.d(e,"h",function(){return o}),a.d(e,"d",function(){return c}),a.d(e,"r",function(){return l}),a.d(e,"f",function(){return p}),a.d(e,"l",function(){return u}),a.d(e,"b",function(){return d}),a.d(e,"p",function(){return h}),a.d(e,"q",function(){return f}),a.d(e,"g",function(){return m}),a.d(e,"i",function(){return v}),a.d(e,"a",function(){return g}),a.d(e,"c",function(){return D}),a.d(e,"j",function(){return b}),a.d(e,"m",function(){return y}),a.d(e,"o",function(){return x}),a.d(e,"n",function(){return T}),a.d(e,"k",function(){return O});var i=a("66df"),s=a("4328"),r=a.n(s),n=function(t){return i["a"].request({url:"analysis/dateentityscompare",data:t,method:"post"})},o=function(t){var e=t.time1,a=t.time2,s=t.bzid;return i["a"].request({url:"dwelltime/chart",params:{time1:e,time2:a,bzid:s},method:"get"})},c=function(t){var e=t.time1,a=t.time2,s=t.from_bzid,r=t.to_bzid,n=t.range;return i["a"].request({url:"crossFlow/index",params:{time1:e,time2:a,from_bzid:s,to_bzid:r,range:n},method:"get"})},l=function(t){var e=t.bzid,a=t.time;return i["a"].request({url:"flow/assoc",params:{bzid:e,time:a},method:"get"})},p=function(t){var e=t.bzid,a=t.time;return i["a"].request({url:"cross/direction",params:{bzid:e,time:a},method:"get"})},u=function(t){return i["a"].request({url:"stat/entityFlowBatch",params:t,method:"get"})},d=function(t){return i["a"].request({url:"dict/industry",params:t,method:"get"})},h=function(t){var e=t.time1,a=t.time2,s=t.industry_id,r=t.property_id;return i["a"].request({url:"shop/enterRate/top",params:{time1:e,time2:a,industry_id:s,property_id:r},method:"get"})},f=function(t){var e=t.time1,a=t.time2,s=t.bzid,r=t.range;return i["a"].request({url:"shop/enterRate/trend",params:{time1:e,time2:a,bzid:s,range:r},method:"get"})},m=function(t){var e=t.time,a=t.bzid;return i["a"].request({url:"flow/drainage",params:{time:e,bzid:a},method:"get"})},v=function(t){var e=t.time,a=t.property_id;return i["a"].request({url:"flow/moving",params:{time:e,property_id:a},method:"get"})},g=function(t){var e=t.time,a=t.property_id,s=t.start,r=t.end,n=t.floor_id;return i["a"].request({url:"judge/keyPath",params:{time:e,property_id:a,start:s,end:r,floor_id:n},method:"get"})},D=function(t){var e=t.date,a=t.property_id;return i["a"].request({url:"manager/query_active_target",params:{date:e,property_id:a},method:"get"})},b=function(t,e,a,s){return i["a"].request({url:"passflow/visits",data:{bzid:t,start_time:e,end_time:a,innerRange:s},method:"post"})},y=function(t){var e=t.time,a=t.bzid,s=t.timeRange;return i["a"].request({url:"analysis/heat_map",data:r.a.stringify({time:e,bzid:a,timeRange:s}),method:"post"})},x=function(t){var e=t.bzid,a=t.type,s=t.time;return i["a"].request({url:"judge/getIsFloat",params:{bzid:e,type:a,time:s},method:"get"})},T=function(t){var e=t.property_id,a=t.type;return i["a"].request({url:"judge/getHKBzids",params:{property_id:e,type:a},method:"get"})},O=function(t){var e=t.time1,a=t.range,s=t.from_bzids,r=t.to_bzids;return i["a"].request({url:"cross/trend",params:{time1:e,range:a,from_bzids:s,to_bzids:r},method:"get"})}},"99d7":function(t,e,a){"use strict";var i=a("36af"),s=a.n(i);s.a},"9c3f":function(t,e,a){},"9c60":function(t,e,a){var i=a("63b6"),s=a("13c8")(!0);i(i.S,"Object",{entries:function(t){return s(t)}})},"9e1c":function(t,e,a){a("7d6d"),t.exports=a("584a").Object.values},aa29:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.userType?a("shop-ten"):t._e(),a("tendency",{staticStyle:{"margin-top":"50px"}})],1)},s=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"go-shop"},[a("div",{staticClass:"go-time-selector"},[a("div",{staticClass:"shop10-picker"},[a("DatePicker",{staticStyle:{width:"230px",float:"left"},attrs:{type:"daterange",placement:"bottom-end",options:t.disabledDate,placeholder:"选择日期"},model:{value:t.crossDate,callback:function(e){t.crossDate=e},expression:"crossDate"}}),a("vs-select",{staticClass:"shopSelect",attrs:{autocomplete:""},model:{value:t.selectType,callback:function(e){t.selectType=e},expression:"selectType"}},t._l(t.typeList,function(t,e){return a("vs-select-item",{key:e,attrs:{value:t.value,text:t.text}})}),1),1==t.selectType?a("DatePicker",{staticStyle:{width:"230px",float:"left","margin-left":"30px"},attrs:{type:"daterange",placement:"bottom-end",options:t.disabledDate,placeholder:"选择日期"},model:{value:t.crossDateTwo,callback:function(e){t.crossDateTwo=e},expression:"crossDateTwo"}}):t._e()],1),a("div",{staticClass:"go-shop-activities"},[a("vs-select",{staticClass:"shopSelect",staticStyle:{width:"230px"},attrs:{autocomplete:"",placeholder:"选择业态"},model:{value:t.activities,callback:function(e){t.activities=e},expression:"activities"}},t._l(t.activitiesType,function(t,e){return a("vs-select-item",{key:e,attrs:{value:t.value,text:t.text}})}),1),a("div",{staticClass:"cross-submit",on:{click:t.paramsPrepare}},[t._v("查询")]),a("div",{staticClass:"cross-reset",on:{click:t.resetData}},[t._v("重置")])],1)]),a("div",{staticClass:"go-shop-chart-list"},[a("div",{staticClass:"go-shop-time-icon"},[a("span",[t._v("进店率TOP10排行分析")]),a("p",t._l(t.iconList,function(e,i){return a("span",{key:i,on:{click:function(a){t.iconClick(e.value)}}},[a("icons",{attrs:{title:t.iconTitle[e.type],type:e.type,size:20,color:t.iconIndex===e.value?t.iconColor:"#9D9D9DFF"}})],1)}))]),t.isData?a("div",{staticClass:"noData"},[t._v("暂无数据")]):t._e(),t.isList?a("vue-apex-charts",{ref:"graphLine",staticClass:"shop-line",class:{lineAction:0==t.iconIndex},attrs:{height:"408",width:"100%",type:"bar",options:t.graphData.chartOptions,series:t.graphData.series}}):t._e(),a("table-default",{staticClass:"shop-table",class:{tableAction:1==t.iconIndex},attrs:{tableTitle:t.goTitle,tableName:t.goName,tableList:t.goTableList}})],1)])},n=[],o=(a("a481"),a("55dd"),a("2d1f")),c=a.n(o),l=(a("ac6a"),a("a4bb")),p=a.n(l),u=(a("7f7f"),a("d4a6")),d=a("63d9"),h=a("1321"),f=a.n(h),m=a("94b0"),v=a("3191"),g=a("c276"),D=a("c1df"),b=a.n(D),y=a("5fe9"),x=a.n(y),T=a("2ef0"),O=a.n(T),_={name:"goShop",components:{flowSelector:u["a"],TableDefault:d["a"],VueApexCharts:f.a},data:function(){return{isList:!1,isData:!0,activities:0,activitiesType:[],crossDate:[],crossDateTwo:[],selectType:0,typeList:[{text:"无对比",value:0},{text:"时间对比",value:1}],iconList:[{type:"62",color:"#9D9D9DFF",value:0},{type:"biaoge-copy",color:"#9D9D9DFF",value:1},{type:"daoru",color:"#9D9D9DFF",value:2}],iconTitle:{zhexiantu:"折线图",62:"柱状图","biaoge-copy":"详细数据",xiangxia:"查看全部实体排行",ditu:"出入口客流",fenxi:"饼状图",chakan:"查看所有",daoru:"下载"},iconIndex:0,iconColor:"rgb(34, 128, 215)",goTitle:"",goName:["名称","百分比"],goTableList:[],graphData:{chartOptions:{chart:{toolbar:{show:!1,tools:{download:!1}},events:{}},plotOptions:{bar:{horizontal:!1,columnWidth:"45%",endingShape:"rounded"}},dataLabels:{enabled:!1},stroke:{show:!0,width:2,colors:["transparent"]},xaxis:{categories:[]},yaxis:{title:{text:"百分比（%）"},labels:{show:!0,formatter:function(t){return t+"%"}}},fill:{opacity:1},tooltip:{y:{formatter:function(t){return t+"%"}}}},series:[]},loadingData:{time1:"",time2:"",id:""},disabledDate:""}},watch:{"$store.state.home.headerAction":function(){this.resetData();var t=this.$router.currentRoute.name;"GoShop"===t&&this.activitiesDataList()}},created:function(){this.disabledDate=g["b"]},mounted:function(){this.activitiesDataList();var t=new Date;t=t.setDate(t.getDate()-1);var e=[b()(t).format("YYYY-MM-DD"),b()(t).format("YYYY-MM-DD")];this.crossDate=e,this.crossDateTwo=e},methods:{activitiesDataList:function(){var t=this,e=this;e.activitiesType=[];var a={text:"所有业态",value:0};e.activitiesType.push(a);var i=this.$store.state.home.headerAction;Object(m["b"])({entity:52,property_id:i}).then(function(a){O.a.forIn(a.data.data,function(t,a){var i={};i.text=t,i.value=a,e.activitiesType.push(i)}),t.paramsPrepare()})},paramsPrepare:function(){var t,e=this,a=b()(e.crossDate[0]).format("YYYY-MM-DD")+","+b()(e.crossDate[1]).format("YYYY-MM-DD");t=0===e.selectType?"":b()(e.crossDateTwo[0]).format("YYYY-MM-DD")+","+b()(e.crossDateTwo[1]).format("YYYY-MM-DD");var i=0===e.activities?"":e.activities;e.loadingData.time1=a,e.loadingData.time2=t,e.loadingData.id=i;var s=this.$store.state.home.headerAction;Object(m["p"])({time1:a,time2:t,industry_id:i,property_id:s}).then(function(t){e.isList=!0,e.graphData.chartOptions.xaxis.categories=[],e.graphData.series=[],e.goTableList=[],e.isData=!1,e.goName=[];var a=[];e.goName.push("时间");var i=t.data.data,s=p()(i);s.forEach(function(t){var e=c()(i[t]),s=e.sort(function(t,e){return e[1]-t[1]});a.push(s)}),a[0].map(function(t){e.graphData.chartOptions.xaxis.categories.push(t[0]),e.goName.push(t[0])}),a.map(function(t,a){var i={};i.name=s[a].replace(/,/g," - "),i.data=[];var r={};r.name=s[a].replace(/,/g," - "),r.percentList=[],t.map(function(t){i.data.push(x.a.times(t[1],100)),0===t[1]?r.percentList.push("0%"):r.percentList.push(x.a.times(t[1],100)+"%")}),e.graphData.series.push(i),e.goTableList.push(r)}),e.$refs.graphLine&&(e.$refs.graphLine.updateOptions({xaxis:{categories:e.graphData.chartOptions.xaxis.categories}}),e.graphData.chartOptions.xaxis.categories.length<2?(e.graphData.chartOptions.plotOptions.bar.columnWidth="15%",e.$refs.graphLine.updateOptions({plotOptions:e.graphData.chartOptions.plotOptions})):e.graphData.chartOptions.xaxis.categories.length<5?(e.graphData.chartOptions.plotOptions.bar.columnWidth="20%",e.$refs.graphLine.updateOptions({plotOptions:e.graphData.chartOptions.plotOptions})):(e.graphData.chartOptions.plotOptions.bar.columnWidth="70%",e.$refs.graphLine.updateOptions({plotOptions:e.graphData.chartOptions.plotOptions})))});try{var r,n;0===e.selectType?(n="无对比",r=a):(n="时间对比",r=[a,t]);var o=e.activitiesType.filter(function(t){return e.activities==t.value});window.TDAPP.onEvent(this.$route.meta.pageTitle+"页面","进店率TOP10查询",{"对比方式":n,"时间段":r,"业态选择":o[0].text})}catch(l){console.log(this.$route.meta.pageTitle+"页面-进店率TOP10查询埋点error:"+l)}},resetData:function(){var t=new Date;t=t.setDate(t.getDate()-1);var e=[b()(t).format("YYYY-MM-DD"),b()(t).format("YYYY-MM-DD")];this.crossDate=e,this.selectType=0,this.activities=this.activitiesType[0].value;try{window.TDAPP.onEvent(this.$route.meta.pageTitle+"页面","进店率TOP10重置",{})}catch(a){console.log(this.$route.meta.pageTitle+"页面-进店率TOP10重置-埋点error:"+a)}},iconClick:function(t){var e=this;if(2===t){var a=this.loadingData.time1,i=this.loadingData.time2,s=this.loadingData.id,r=this.$store.state.home.headerAction;""!=a&&Object(v["t"])({time1:a,time2:i,industry_id:s,property_id:r}).then(function(t){e.dowloadXlsx(t)});try{window.TDAPP.onEvent(this.$route.meta.pageTitle+"页面","进店率TOP10排行下载",{})}catch(n){console.log(this.$route.meta.pageTitle+"页面-进店率TOP10排行下载-埋点error:"+n)}}else this.iconIndex=t},dowloadXlsx:function(t){var e=new Date,a=new Blob([t.data]),i="进店率分析商铺排行",s=i+b()(e).format("YYYYMMDDHHmmss")+".xls",r=document.createElement("a");r.download=s,r.style.display="none",r.href=URL.createObjectURL(a),document.body.appendChild(r),r.click(),URL.revokeObjectURL(r.href),document.body.removeChild(r)}}},Y=_,w=(a("8243"),a("023b"),a("2877")),L=Object(w["a"])(Y,r,n,!1,null,"eed1ca36",null),M=L.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.isHtml?a("div",{staticClass:"go-shop"},[a("div",{staticClass:"go-time-selector",staticStyle:{"margin-top":"40px"}},[a("div",{staticClass:"tendency-picker"},[a("DatePicker",{staticStyle:{width:"230px",float:"left"},attrs:{type:"daterange",placement:"bottom-end",options:t.disabledDate,placeholder:"选择日期"},model:{value:t.crossDate,callback:function(e){t.crossDate=e},expression:"crossDate"}}),a("vs-select",{staticClass:"selectExample",attrs:{autocomplete:""},model:{value:t.selectType,callback:function(e){t.selectType=e},expression:"selectType"}},t._l(t.typeList,function(t,e){return a("vs-select-item",{key:e,attrs:{value:t.value,text:t.text}})}),1),1==t.selectType?a("DatePicker",{staticStyle:{width:"212px",float:"left","margin-left":"30px"},attrs:{type:"daterange",placement:"bottom-end",options:t.disabledDate,placeholder:"选择日期"},model:{value:t.crossDateTwo,callback:function(e){t.crossDateTwo=e},expression:"crossDateTwo"}}):t._e()],1),a("div",{staticClass:"go-shop-activities"},[a("div",{staticStyle:{overflow:"hidden"}},[a("div",{staticClass:"tendencyDom"},[a("el-cascader",{staticClass:"tendencyCascader",attrs:{props:{multiple:!0},options:t.activitiesType},model:{value:t.activities,callback:function(e){t.activities=e},expression:"activities"}})],1),a("div",{staticClass:"cross-submit",on:{click:t.paramsPrepare}},[t._v("查询")]),a("div",{staticClass:"cross-reset",on:{click:t.resetData}},[t._v("重置")])])])]),a("div",{staticClass:"go-shop-chart-list"},[a("div",{staticClass:"go-shop-time-icon"},[a("span",[t._v("进店率趋势分析")]),a("p",t._l(t.iconList,function(e,i){return a("span",{key:i,on:{click:function(a){t.iconClick(e.value)}}},[a("icons",{attrs:{title:t.iconTitle[e.type],type:e.type,size:20,color:t.iconIndex===e.value?t.iconColor:"#9D9D9DFF"}})],1)}))]),t.isData?a("div",{staticClass:"noData"},[t._v("暂无数据")]):t._e(),t.isList?a("vue-apex-charts",{ref:"graphLine",staticClass:"tendencyLine",class:{lineAction:0==t.iconIndex},attrs:{height:"428",width:"100%",id:"tendencyLine",type:"line",options:t.lineData.chartOptions,series:t.lineData.series}}):t._e(),a("vue-apex-charts",{ref:"graphBar",staticClass:"tendencyBar",class:{barAction:1==t.iconIndex},attrs:{height:"428",width:"100%",type:"bar",options:t.graphData.chartOptions,series:t.graphData.series}}),a("table-default",{staticClass:"tendencyTable",class:{tableAction:2==t.iconIndex},attrs:{tableTitle:t.goTitle,tableName:t.goName,tableList:t.goTableList}})],1),t.isAlert?a("alert",{attrs:{alertText:t.alertText},on:{closeAlert:t.closeAlert,alertConfirm:t.alertConfirm}}):t._e()],1):t._e()},k=[],$=a("768b"),A=(a("c5f6"),a("db0c")),z=a.n(A),E=a("2dc0"),F=a("ad00"),P={name:"goShop",components:{flowSelector:u["a"],TableDefault:d["a"],VueApexCharts:f.a,alert:E["a"]},data:function(){return{disabledDate:"",isHtml:!1,isList:!1,isData:!0,activities:[],activitiesType:[],crossDate:[],crossDateTwo:[],selectType:0,selectAll:0,typeList:[{text:"无对比",value:0},{text:"时间对比",value:1}],iconList:[{type:"zhexiantu",color:"#9D9D9DFF",value:0},{type:"62",color:"#9D9D9DFF",value:1},{type:"biaoge-copy",color:"#9D9D9DFF",value:2},{type:"daoru",color:"#9D9D9DFF",value:3}],iconTitle:{zhexiantu:"折线图",62:"柱状图","biaoge-copy":"详细数据",xiangxia:"查看全部实体排行",ditu:"出入口客流",fenxi:"饼状图",chakan:"查看所有",daoru:"下载"},iconIndex:0,iconColor:"rgb(34, 128, 215)",goTitle:"",goName:[],goTableList:[],graphData:{chartOptions:{chart:{toolbar:{show:!1,tools:{download:!1}},events:{}},plotOptions:{bar:{horizontal:!1,columnWidth:"45%",endingShape:"rounded"}},dataLabels:{enabled:!1},stroke:{show:!0,width:2,colors:["transparent"]},xaxis:{categories:[]},yaxis:{title:{text:"百分比（%）"},labels:{show:!0,formatter:function(t){return t+"%"}},tickAmount:5},fill:{opacity:1},tooltip:{y:{formatter:function(t){return t+"%"}}}},series:[]},lineData:{chartOptions:{chart:{type:"line",toolbar:{show:!1,tools:{download:!1}}},title:{text:""},stroke:{width:2},dataLabels:{enabled:!1},colors:["#33B3ED","#2BD9CF","#94E2FF","#FBAB40","#8D82F0","#E8585A"],yaxis:{title:{text:"百分比（%）"},tickAmount:5,labels:{show:!0,formatter:function(t){return t+"%"}}},xaxis:{labels:{offsetX:0},axisBorder:{show:!1},categories:[]},tooltip:{y:{formatter:function(t){return t+"%"}}},markers:{size:5,hover:{sizeOffset:2}}},series:[]},loadingData:{time1:"",time2:"",id:""},isAlert:!1,alertText:{title:"",text:"",bg:"",confirm:!1},resetListData:[]}},activated:function(){this.isHtml=!0},deactivated:function(){this.isHtml=!1},watch:{"$store.state.home.headerAction":function(){this.resetData();var t=this.$router.currentRoute.name;"GoShop"===t&&this.allZoneList()},"$store.state.home.bussinessDict":function(){this.allZoneList()}},created:function(){this.disabledDate=g["b"]},mounted:function(){var t=new Date;t=t.setDate(t.getDate()-1);var e=[b()(t).format("YYYY-MM-DD"),b()(t).format("YYYY-MM-DD")];this.crossDate=e,this.crossDateTwo=e,this.allZoneList()},methods:{allZoneList:function(){var t=this,e=this,a=this.$store.state.home.headerAction;Object(F["c"])({property_id:a}).then(function(a){if(200==a.data.code){var i=a.data.data;t.resetListData=i,t.shopList(i),e.paramsPrepare()}}).catch(function(t){console.log(t)})},paramsPrepare:function(){var t,e,a,i,s=this,r=b()(s.crossDate[0]).format("YYYY-MM-DD")+","+b()(s.crossDate[1]).format("YYYY-MM-DD");if(e=this.gotInnerRange(s.crossDate),0==s.selectType?(i="",a=""):(i=b()(s.crossDateTwo[0]).format("YYYY-MM-DD")+","+b()(s.crossDateTwo[1]).format("YYYY-MM-DD"),a=this.gotInnerRange(s.crossDateTwo)),t=""==a?e:"Month"==a||"Month"==e?"Month":"Date",0===s.activities.length)return s.isAlert=!0,s.alertText.bg="#00A0E9",s.alertText.title="趋势分析",s.alertText.text="商铺不能为空，请选择商铺",s.alertText.confirm=!1,!1;var n=O.a.clone(s.activities),o=[];n.map(function(t){o.push(t[1])});var c=o.join(",");s.loadingData.time1=r,s.loadingData.time2=i,s.loadingData.id=c,Object(m["q"])({time1:r,time2:i,bzid:c,range:t}).then(function(e){s.isList=!0,s.lineData.chartOptions.xaxis.categories=[],s.lineData.series=[],s.graphData.chartOptions.xaxis.categories=[],s.graphData.series=[],s.isData=!1,s.goName=[],s.goTableList=[],s.goName.push("时间");var a=e.data.data;0===s.selectType?s.noComparison(a):s.comparison(a,t)});try{var l,p;0===s.selectType?(p="无对比",l=r):(p="时间对比",l=[r,i]);var u=[];s.activities.map(function(t){s.activitiesType.map(function(e){e.children.map(function(e){e.value==t[1]&&u.push([t[0],e.label])})})});var d=[];u.forEach(function(t){d.push(t[0]+"/"+t[1])}),window.TDAPP.onEvent(this.$route.meta.pageTitle+"页面","进店率趋势查询",{"对比方式":p,"时间段":l,"店铺选择":d.join(",")})}catch(h){console.log(this.$route.meta.pageTitle+"页面-进店率趋势查询埋点error:"+h)}},noComparison:function(t){var e=this,a=this;if(0!=t.length){var i=t[p()(t)[0]],s=z()(i)[0];s.map(function(t){a.lineData.chartOptions.xaxis.categories.push(t.date),a.graphData.chartOptions.xaxis.categories.push(t.date)});var r=[];z()(i).forEach(function(t){var e={};e.name=t[0].name,e.data=[],t.forEach(function(t){var a=0===t.rate?"0":x.a.times(t.rate,100);e.data.push(Number(a))}),r.push(t),a.lineData.series.push(e),a.graphData.series.push(e)}),a.$refs.graphLine&&a.$refs.graphLine.updateOptions({xaxis:{categories:a.lineData.chartOptions.xaxis.categories}});var n=b()(a.crossDate[0]).format("YYYY-MM-DD"),o=b()(a.crossDate[1]).format("YYYY-MM-DD");setTimeout(function(){var t,i=document.getElementById("tendencyLine");i&&(t=i.offsetWidth);var s=(t/2).toFixed(2)-50;n==o?a.upDateLineX(s,!1):a.upDateLineX(0,!0),a.$refs.graphBar&&e.upDateBarX()}),r.forEach(function(t){a.goName.push(t[0].name)}),r[0].forEach(function(t,e){var i={};i.name=t.date,i.percentList=[],r.forEach(function(t,a){var s=r[a][e]?r[a][e].rate:0,n=0===s?"0%":x.a.times(s,100)+"%";i.percentList.push(n)}),a.goTableList.push(i)})}},comparison:function(t,e){var a,i,s=this,r=this,n=t[p()(t)[0]],o=t[p()(t)[1]],c=z()(n)[0].length,l=z()(o)[0].length;a=c>l?z()(n)[0]:z()(o)[0],i="Month"==e?"月":"天",a.map(function(t,e){var a=Number(e)+1,s="第"+a+i;r.lineData.chartOptions.xaxis.categories.push(s),r.graphData.chartOptions.xaxis.categories.push(s)}),O.a.forIn(t,function(t,e){O.a.forIn(t,function(t,a){var i={};i.name=t[0].name+e.replace(/,/g," - "),i.data=[],t.map(function(t,e){i.data.push(x.a.times(t.rate,100))}),r.lineData.series.push(i),r.graphData.series.push(i)})}),r.$refs.graphLine.updateOptions({xaxis:{categories:r.lineData.chartOptions.xaxis.categories}});var u=b()(r.crossDate[0]).format("YYYY-MM-DD"),d=b()(r.crossDate[1]).format("YYYY-MM-DD"),h=b()(r.crossDateTwo[0]).format("YYYY-MM-DD"),f=b()(r.crossDateTwo[1]).format("YYYY-MM-DD");if(setTimeout(function(){var t=document.getElementById("tendencyLine").offsetWidth,e=(t/2).toFixed(2)-50;u==d&&h==f?r.upDateLineX(e,!1):r.upDateLineX(0,!0),r.$refs.graphBar&&s.upDateBarX()}),O.a.forIn(t,function(t,e){O.a.forIn(t,function(t,a){r.goName.push(t[0].name+e)})}),c>l){var m=z()(n),v=z()(o);m[0].map(function(t,e){var a={},s=e+1;a.name="第"+s+i,a.percentList=[],m.map(function(t,i){var s=m[i][e].rate,r=0===s?"0%":x.a.times(s,100)+"%";a.percentList.push(r)}),m.map(function(t,i){var s,r=v[i][e];s=r?0===r?"0%":x.a.times(r.rate,100)+"%":" ",a.percentList.push(s)}),r.goTableList.push(a)})}else{m=z()(o),v=z()(n);m[0].map(function(t,e){var a={},s=e+1;a.name="第"+s+i,a.percentList=[],m.map(function(t,i){var s,r=v[i][e];s=r?0===r.rate?"0%":x.a.times(r.rate,100)+"%":" ",a.percentList.push(s)}),m.map(function(t,i){var s=m[i][e].rate,r=0===s?"0%":x.a.times(s,100)+"%";a.percentList.push(r)}),r.goTableList.push(a)})}},resetData:function(){var t=new Date;t=t.setDate(t.getDate()-1);var e=[b()(t).format("YYYY-MM-DD"),b()(t).format("YYYY-MM-DD")];this.crossDate=e,this.selectType=0,this.shopList(this.resetListData);try{window.TDAPP.onEvent(this.$route.meta.pageTitle+"页面","进店率趋势重置",{})}catch(a){console.log(this.$route.meta.pageTitle+"页面-进店率趋势重置-埋点error:"+a)}},shopList:function(t){var e=this;this.activitiesType=[],this.activities=[];var a=p()(t);a.forEach(function(a){var i={};i.value=a,i.label=a,i.children=[],t[a].forEach(function(t){var s={};s.value=t.id,s.label=t.name,s.name=t.name,i.children.push(s),e.activities.push([a,s.value])}),e.activitiesType.push(i)})},upDateLineX:function(t,e){var a=this;a.lineData.chartOptions.xaxis.labels.offsetX=t,a.$refs.graphLine&&(a.$refs.graphLine.updateOptions({xaxis:{offsetX:a.lineData.chartOptions.xaxis.labels.offsetX}}),a.lineData.chartOptions.xaxis.axisBorder.show=e,a.$refs.graphLine.updateOptions({xaxis:{show:a.lineData.chartOptions.xaxis.axisBorder.show}}))},upDateBarX:function(){var t=this;t.$refs.graphBar.updateOptions({xaxis:{categories:t.graphData.chartOptions.xaxis.categories}}),t.$refs.graphBar.updateOptions({xaxis:t.graphData.chartOptions.xaxis}),t.graphData.chartOptions.xaxis.categories.length<2?(t.graphData.chartOptions.plotOptions.bar.columnWidth="15%",t.$refs.graphBar.updateOptions({plotOptions:t.graphData.chartOptions.plotOptions})):t.graphData.chartOptions.xaxis.categories.length<5?(t.graphData.chartOptions.plotOptions.bar.columnWidth="20%",t.$refs.graphBar.updateOptions({plotOptions:t.graphData.chartOptions.plotOptions})):(t.graphData.chartOptions.plotOptions.bar.columnWidth="70%",t.$refs.graphBar.updateOptions({plotOptions:t.graphData.chartOptions.plotOptions}))},iconClick:function(t){if(3===t){var e=this.loadingData.time1,a=this.loadingData.time2,i=this.loadingData.id;Object(v["u"])({time1:e,time2:a,bzid:i}).then(function(t){var e=new Date,a=new Blob([t.data]),i="进店率分析趋势分析",s=i+b()(e).format("YYYYMMDDHHmmss")+".xls",r=document.createElement("a");r.download=s,r.style.display="none",r.href=URL.createObjectURL(a),document.body.appendChild(r),r.click(),URL.revokeObjectURL(r.href),document.body.removeChild(r)});try{window.TDAPP.onEvent(this.$route.meta.pageTitle+"页面","进店率趋势下载",{})}catch(s){console.log(this.$route.meta.pageTitle+"页面-进店率趋势下载-埋点error:"+s)}}else this.iconIndex=t},alertConfirm:function(){this.isAlert=!1},closeAlert:function(){this.isAlert=!1},shopActionList:function(t){var e=this,a=e.activitiesType.length;if(a-t.length==1&&-1!=t.indexOf(0)&&(this.selectAll=0,e.activities=O.a.filter(t,function(t){return 0!=t})),1==this.selectAll&&-1==t.indexOf(0)&&(this.selectAll=0,e.activities=[]),0==O.a.last(t)){var i=e.activitiesType.map(function(t){return t.value});this.selectAll=1,e.activities=i}},gotInnerRange:function(t){var e=Object($["a"])(t,2),a=e[0],i=e[1],s=b()(a),r=b()(i),n=b.a.duration(r.diff(s)).asDays(),o="";return o=n<60?"Date":"Month",o}}},S=P,B=(a("ccf8"),a("d065"),Object(w["a"])(S,C,k,!1,null,"657d7cbc",null)),j=B.exports,I={name:"goShop",components:{shopTen:M,tendency:j},data:function(){return{}},computed:{userType:function(){var t,e=this.$store.state.user.role_id;if(e<3)return!0;var a=this.$store.state.user.allType;return a.map(function(e){e&&(t=50!=e)}),t}},mounted:function(){},methods:{}},N=I,q=Object(w["a"])(N,i,s,!1,null,"0748c54e",null);e["default"]=q.exports},b606:function(t,e,a){a("9c60"),t.exports=a("584a").Object.entries},ccf8:function(t,e,a){"use strict";var i=a("f2a6"),s=a.n(i);s.a},d065:function(t,e,a){"use strict";var i=a("9c3f"),s=a.n(i);s.a},db0c:function(t,e,a){t.exports=a("9e1c")},f2a6:function(t,e,a){}}]);