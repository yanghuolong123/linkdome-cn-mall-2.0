(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a401a6ac"],{"13c8":function(t,e,a){var n=a("c3a1"),i=a("36c3"),r=a("355d").f;t.exports=function(t){return function(e){var a,o=i(e),s=n(o),l=s.length,c=0,u=[];while(l>c)r.call(o,a=s[c++])&&u.push(t?[a,o[a]]:o[a]);return u}}},1908:function(t,e,a){},2626:function(t,e,a){"use strict";var n=a("6c4c"),i=a.n(n);i.a},"268f":function(t,e,a){t.exports=a("fde4")},"4ce9":function(t,e,a){"use strict";var n=a("ce77"),i=a.n(n);i.a},"4ee1f":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("vs-table",{attrs:{data:t.data,maxHeight:"400px",noDataText:t.noData,id:"i-table-component"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.data;return t._l(n,function(e,n){return a("vs-tr",{key:n},t._l(t.columns,function(n,i){return a("vs-td",{key:i},[t._v(t._s(e[n.key]&&e[n.key].toLocaleString()))])}),1)})}}])},[a("template",{slot:"header"},[t._t("head")],2),a("template",{slot:"thead"},t._l(t.columns,function(e,n){return a("vs-th",{key:n},[t._v(t._s(e.title))])}),1)],2)},i=[],r={props:{columns:{type:Array,default:function(){return[]}},data:{type:Array,default:function(){return[]}},noData:{type:String,default:"暂无数据"}}},o=r,s=(a("4ce9"),a("2877")),l=Object(s["a"])(o,n,i,!1,null,"699f3333",null);e["a"]=l.exports},"5fe9":function(t,e,a){"use strict";function n(t,e){return void 0===e&&(e=12),+parseFloat(t.toPrecision(e))}function i(t){var e=t.toString().split(/[eE]/),a=(e[0].split(".")[1]||"").length-+(e[1]||0);return a>0?a:0}function r(t){if(-1===t.toString().indexOf("e"))return Number(t.toString().replace(".",""));var e=i(t);return e>0?n(t*Math.pow(10,e)):t}function o(t){d&&(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER)&&console.warn(t+" is beyond boundary when transfer to integer, the results may not be accurate")}function s(t,e){for(var a=[],n=2;n<arguments.length;n++)a[n-2]=arguments[n];if(a.length>0)return s.apply(void 0,[s(t,e),a[0]].concat(a.slice(1)));var l=r(t),c=r(e),u=i(t)+i(e),f=l*c;return o(f),f/Math.pow(10,u)}function l(t,e){for(var a=[],n=2;n<arguments.length;n++)a[n-2]=arguments[n];if(a.length>0)return l.apply(void 0,[l(t,e),a[0]].concat(a.slice(1)));var r=Math.pow(10,Math.max(i(t),i(e)));return(s(t,r)+s(e,r))/r}function c(t,e){for(var a=[],n=2;n<arguments.length;n++)a[n-2]=arguments[n];if(a.length>0)return c.apply(void 0,[c(t,e),a[0]].concat(a.slice(1)));var r=Math.pow(10,Math.max(i(t),i(e)));return(s(t,r)-s(e,r))/r}function u(t,e){for(var a=[],n=2;n<arguments.length;n++)a[n-2]=arguments[n];if(a.length>0)return u.apply(void 0,[u(t,e),a[0]].concat(a.slice(1)));var l=r(t),c=r(e);return o(l),o(c),s(l/c,Math.pow(10,i(e)-i(t)))}function f(t,e){var a=Math.pow(10,e);return u(Math.round(s(t,a)),a)}Object.defineProperty(e,"__esModule",{value:!0});var d=!0;function p(t){void 0===t&&(t=!0),d=t}var h={strip:n,plus:l,minus:c,times:s,divide:u,round:f,digitLength:i,float2Fixed:r,enableBoundaryChecking:p};e.strip=n,e.plus=l,e.minus=c,e.times=s,e.divide=u,e.round=f,e.digitLength=i,e.float2Fixed=r,e.enableBoundaryChecking=p,e["default"]=h},"602e":function(t,e,a){},"6c4c":function(t,e,a){},"6d57":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tabitem"},[t._t("default")],2)},i=[],r={name:"TabItem",mounted:function(){var t=this;this.$nextTick(function(){t.updateNav()})},methods:{updateNav:function(){this.$parent.updateNav()}},destroyed:function(){var t=this;this.$nextTick(function(){t.updateNav()})}},o=r,s=(a("e4be"),a("2877")),l=Object(s["a"])(o,n,i,!1,null,"d833551c",null);e["a"]=l.exports},"776a":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tab-box"},[a("div",{staticClass:"tab-bar"},[a("div",{staticClass:"tab-bar-left"},[t.isNowTime?[a("span",[t._v(t._s(t.date))]),a("span",[t._v(t._s(t.time))])]:a("span",[t._v("\n        "+t._s(t.titleList[t.value])+"\n        "),"新老顾客占比"==t.titleList[0]?a("Tooltip",{attrs:{content:t.tootipText,placement:"bottom",theme:"light",transfer:"","max-width":"600"}},[a("icons",{attrs:{type:"wenhao"}})],1):t._e()],1)],2),a("div",{staticClass:"tab-bar-right"},[t._t("select"),a("ul",[t._l(t.navList,function(e,n){return a("li",{key:n,attrs:{title:t.iconTitle[e.icon]?t.iconTitle[e.icon]:""},on:{click:function(a){t.handleClick(n,e)}}},[a("span",{staticClass:"navitemIcon"},[a("icons",{attrs:{type:e.icon,size:20,color:t.currentIndex===n?t.iconColor:"#9D9D9DFF"}})],1)])}),t._t("export")],2)],2)]),a("div",{staticClass:"tab-con",style:t.contentStyle},[t._t("default")],2)])},i=[],r=(a("28a5"),a("ac6a"),a("7f7f"),a("c5f6"),a("c1df")),o=a.n(r),s={name:"tabs",props:{value:{type:Number,default:0},iconColor:{type:String,default:"#2280D7"},isNowTime:{type:Boolean,default:!1},exportXls:{type:Boolean,default:!1}},data:function(){return{tootipText:"新顾客：在所选时间段内仅来过1次的人数\n老顾客：在所选时间段内来过2次及以上的人数",navList:[],titleList:[],currentIndex:0,iconTitle:{zhexiantu:"折线图",62:"柱状图","biaoge-copy":"详细数据",xiangxia:"查看全部实体排行",ditu:"出入口客流",fenxi:"饼状图",chakan:"查看所有"},date:"",time:""}},mounted:function(){var t=this;this.isNowTime&&setInterval(function(){t.formatTime()},1e3)},computed:{contentStyle:function(){var t={};return t={transform:"translateX(-".concat(this.value,"00%)")},t}},methods:{getTabs:function(){return this.$children.filter(function(t){return"TabItem"===t.$options.name})},updateNav:function(){var t=this;this.navList=[],this.titleList=[];var e=this.$slots.default.filter(function(t){return void 0!==t.data});e.forEach(function(e,a){e.data.attrs&&(t.navList.push({label:e.data.attrs.label||"",icon:e.data.attrs.icon||"",name:a}),t.titleList.push(e.data.attrs.titles||""),t.handleClick(0))})},handleClick:function(t,e){this.currentIndex=t,this.$emit("input",t),this.$emit("on-click",t,e)},formatTime:function(){var t=o()().format("YYYY-MM-DD HH:mm:ss").split(" ");this.date=t[0],this.time=t[1]}}},l=s,c=(a("a6b3"),a("2877")),u=Object(c["a"])(l,n,i,!1,null,"8df506a6",null);e["a"]=u.exports},"7d6d":function(t,e,a){var n=a("63b6"),i=a("13c8")(!1);n(n.S,"Object",{values:function(t){return i(t)}})},"869a":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.isTypeChange?a("i-tabs",{ref:"chartsTabs",model:{value:t.current,callback:function(e){t.current=e},expression:"current"}},[t._t("default",null,{slot:"select"}),t._t("export",null,{slot:"export"}),t._l(t.type,function(e,n){return a("tab-item",{key:n,staticClass:"chart-tab-box",class:{times:"radialBar"===e},attrs:{icon:t.getIcon(e),titles:t.title}},[a("div",{staticClass:"graphStyle",style:"bar"===e?"":"margin-top:20px"},[a("vue-apex-charts",{attrs:{type:e,width:t.chartWidth,height:t.chartHeight(e),options:t.getOpt(e),series:"radialBar"===e?t.radiabarSeries:t.cloneSeries()}})],1),t.lengendData.length?a("custom-legend",{attrs:{data:t.lengendData}}):t._e(),t.isNoData?a("div",{staticClass:"noDataStyle",class:"noDataStyle"+e}):t._e()],1)}),a("tab-item",{attrs:{icon:"biaoge-copy",titles:"详细数据",id:"table-item"}},[a("i-table",{attrs:{columns:t.columns,data:t.tableData}})],1)],2):t._e()},i=[],r=a("cebc"),o=a("db0c"),s=a.n(o),l=(a("28a5"),a("a4bb")),c=a.n(l),u=a("e814"),f=a.n(u),d=(a("6762"),a("2fdb"),a("4917"),a("a481"),a("ac6a"),a("7f7f"),a("75fc")),p=a("7618"),h=(a("c5f6"),a("776a")),b=a("6d57"),m=a("9777"),y=a("1321"),g=a.n(y),v=a("4ee1f"),x=a("2ef0"),k=a.n(x),_=a("5fe9"),w=a.n(_),C={donut:{plotOptions:{pie:{donut:{size:"65%"},size:100}},colors:["#857AEF","#F9A143","#EA5455","#FF9F43","#1E1E1E"],dataLabels:{enabled:!1},fill:{type:"gradient",gradient:{shade:"dark",type:"vertical",shadeIntensity:.5,gradientToColors:["#AAA3F4","#F5C380"],inverseColors:!1,opacityFrom:1,opacityTo:1,stops:[0,100]}},legend:{show:!1},tooltip:{enabled:!0,custom:function(t){var e=t.series,a=t.seriesIndex,n=(t.dataPointIndex,t.w),i=k.a.sum(e);return"<p style=background-color:".concat(n.config.colors[a]," class='p-2'><span class='pr-4'>").concat(n.config.labels[a],":</span>").concat(k.a.round(e[a]/i*100,1),"%</p>")}}},radialBar:{labels:[],plotOptions:{radialBar:{size:135,hollow:{size:"20%"},track:{background:"#ebebeb",strokeWidth:"100%",margin:15},dataLabels:{show:!0,name:{fontSize:"18px"},value:{fontSize:"16px",color:"#636a71",offsetY:11},total:{show:!1}}}},responsive:[{breakpoint:480,options:{plotOptions:{radialBar:{size:120,hollow:{size:"10%"},track:{background:"#ebebeb",strokeWidth:"100%",margin:15}}}}}],colors:["#E85A5A","#00A0E9"],fill:{type:"gradient",gradient:{shade:"dark",type:"vertical",shadeIntensity:.5,gradientToColors:["#FCAC3F","#01A1E9"],inverseColors:!1,opacityFrom:1,opacityTo:1,stops:[0,100]}},stroke:{lineCap:"round"},chart:{dropShadow:{enabled:!1,blur:3,left:1,top:1,opacity:.1},toolbar:{show:!1}}},pie:{labels:[],colors:["#eb6162","#7c64f6","#26dad0","#00a2ea","#fea756"],legend:{show:!1},chart:{type:"pie",dropShadow:{enabled:!1,blur:5,left:1,top:1,opacity:.2},toolbar:{show:!1}},stroke:{width:2},fill:{type:"gradient",gradient:{gradientToColors:["#f08e8f","#9a89f9","#79ece5","#60c2ee","#fec087"]}},dataLabels:{enabled:!1},tooltip:{enabled:!0,custom:function(t){var e=t.series,a=t.seriesIndex,n=(t.dataPointIndex,t.w),i=k.a.sum(e);return"<p style=background-color:".concat(n.config.colors[a]," class='p-2'><span class='pr-4'>").concat(n.config.labels[a],":</span>").concat(w.a.times(w.a.round(e[a]/i,3),100),"%</p>")}}},bar:{xaxis:{categories:[],labels:{show:!0,style:{fontFamily:"Roboto,sans-serif"}}},yaxis:{labels:{formatter:function(t){return"number"===typeof t?t?k.a.round(t,0).toLocaleString():"":t},style:{fontFamily:"Roboto,sans-serif"}},min:0},chart:{toolbar:{show:!1},fontFamily:"source_han_sans_cn",zoom:{enabled:!1}},noData:{text:"暂无数据",align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},plotOptions:{bar:{horizontal:!1,endingShape:"rounded",radius:0,distributed:!1}},colors:["#00A0E9","#ee7552","#94e2ff","#fbab40","#e8585a","#8d82f0"],dataLabels:{enabled:!1},tooltip:{style:{maxWidth:"100px",whiteSpace:"pre-wrap"}},responsive:[{breakpoint:1e3,options:{plotOptions:{bar:{horizontal:!1}},legend:{position:"bottom"}}}]},line:{xaxis:{categories:[],labels:{show:!0,style:{fontFamily:"Roboto,sans-serif"}}},yaxis:{labels:{formatter:function(t){return"number"===typeof t?t?k.a.round(t,0).toLocaleString():"":t},style:{fontFamily:"Roboto,sans-serif"}},min:0},chart:{toolbar:{show:!1},fontFamily:"source_han_sans_cn",zoom:{enabled:!1}},noData:{text:"暂无数据",align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},tooltip:{shared:!1},stroke:{curve:"straight",width:2},colors:["#00A0E9","rgb(231, 88, 91)","#94e2ff","#fbab40","#e8585a","#8d82f0"],dataLabels:{enabled:!1}},radar:{labels:[],dataLabels:{style:{fontSize:"14px",fontWeight:"500",fontFamily:"Roboto",colors:["#2b2c2c","#2b2c2c","#2b2c2c","#2b2c2c","#2b2c2c","#2b2c2c"]}},yaxis:{show:!1},grid:{show:!1},legend:{show:!0},chart:{dropShadow:{enabled:!1,blur:8,left:1,top:1,opacity:.8},toolbar:{show:!1}},stroke:{width:0},colors:["#00A0E9","#E7585B"],plotOptions:{radar:{polygons:{strokeColors:["#e8e8e8","transparent","transparent","transparent","transparent","transparent"],connectorColors:"transparent"}}},fill:{type:"gradient",gradient:{shade:"dark",gradientToColors:["#52BEF0","#FEB33D","#52BEF0","#FEB33D"],shadeIntensity:1,type:"horizontal",opacityFrom:.6,opacityTo:.9,stops:[0,100,100,100]}},markers:{size:0}}},O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"custom-legend-box"},[t.data.length?a("ul",{staticClass:"px-16 pb-2 text-black text-lg"},t._l(t.data,function(e,n){return a("li",{key:n,style:2==t.data.length?"margin-bottom:36px":""},[a("p",{staticClass:"flex justify-between"},[a("span",{staticClass:"flex items-center"},[a("icons",{attrs:{size:20,type:e.icon,color:e.color}}),a("span",{staticClass:"font-medium ml-2"},[t._v(t._s(e.title))])],1),a("span",{staticClass:"text-grey-darker",staticStyle:{"margin-left":"30px","line-height":"30px"}},[t._v(t._s(Number(e.value).toLocaleString()))])])])})):t._e()])},S=[],T={name:"customLegend",props:{data:{type:Array,default:function(){return[]}}}},E=T,D=a("2877"),F=Object(D["a"])(E,O,S,!1,null,null,null),A=F.exports,z={name:"copyChartsTabs",components:{iTabs:h["a"],tabItem:b["a"],VueApexCharts:g.a,iTable:v["a"],customLegend:A,exportMenu:m["a"]},props:{xAxis:{type:Object,default:function(){return{}}},labels:{type:Object,default:function(){return{}}},series:{type:Array,default:function(){return[]}},type:{type:Array,default:function(){return["line","bar"]}},title:{type:String,default:"客流量趋势"},extraOptions:{type:Object,default:function(){return{}}},height:{type:Number,default:400},isEntityAnalytics:{type:Boolean,default:!1},isHome:{type:Boolean,default:!1},istotal:{type:Boolean,default:!1},chartWidth:{default:"99%"}},data:function(){return{current:0,nodata:"暂无数据",isTypeChange:!0,iconCheck:{bar:"62",line:"zhexiantu",pie:"fenxi",donut:"fenxi",radialBar:"fenxi",radar:"fenxi"},isNoData:!1}},computed:{xaxisOrlabels:function(){return k.a.merge(this.xAxis,this.labels)},megerSeries:function(){return"object"===Object(p["a"])(this.series[0])?[this.xaxisOrlabels].concat(Object(d["a"])(this.series)):[this.xaxisOrlabels].concat([{name:"客流量",key:"enter",data:this.series}])},columns:function(){var t=this.megerSeries.map(function(t){return{title:t.name,key:t.key}});return this.$emit("getShopTableCoumn",t),t},tableData:function(){var t=this;if(!this.xaxisOrlabels.data)return[];var e=this.xaxisOrlabels.data.map(function(e,a){var n={};return t.columns.forEach(function(e,i){var r=t.megerSeries[i].data[a];if("string"===typeof r&&r.indexOf(":00")>-1){var o=k.a.cloneDeep(r),s=o.replace(":00","");s=Number(s),r=r+" - "+s+":59"}try{t.megerSeries[i].key&&t.megerSeries[i].key.match(/[A-Za-z]+/)&&["CloseRate","RepeatPurchaseRate"].includes(t.megerSeries[i].key.match(/[A-Za-z]+/)[0])&&(r="".concat(f()(r),"%"))}catch(l){console.log(l)}n[e.key]=r}),n});if(e[0]){var a=c()(e[0]),n={};a.map(function(t,i){if(0==i)n[a[0]]="合计";else{var r=a[i].split("_")[0],o=a[i].split("_")[1],l=0;"enter"==r||"exit"==r?(e.map(function(t){l+=s()(t)[i]}),n[a[i]]=l):"enter"==o||"exit"==o?(e.map(function(t){l+=s()(t)[i]}),n[a[i]]=k.a.isNaN(l)?"":l):n[a[i]]=""}}),1==this.istotal&&e.push(n)}return this.$emit("getShopTableData",e),e},radiabarSeries:function(){if(this.series.length){var t=k.a.sum(this.series);return this.series.map(function(e){return t?k.a.round(e/t*100,1):0})}return[]},lengendData:function(){var t=this;return this.labels.data&&this.labels.icons?this.labels.data.map(function(e,a){return{title:e,icon:t.labels.icons[a],value:t.series[a],color:C[t.type[0]].colors[a]}}):[]}},watch:{type:{handler:function(t,e){var a=this;this.$nextTick(function(){a.isTypeChange=!1,a.$nextTick(function(){a.isTypeChange=!0})})}},columns:function(){var t={type:this.title,data:[this.columns,this.tableData]};this.$emit("tableChage",t)}},methods:{getOpt:function(t){var e=this.labels.data?Object(r["a"])({},C[t],{labels:this.labels.data}):Object(r["a"])({},C[t],{xaxis:{categories:this.xAxis.data}},{markers:{size:5,hover:{sizeOffset:2}}}),a=k.a.cloneDeep(e);if("bar"===t){var n=this.xAxis.data?this.xAxis.data.length:0,i={yaxis:{labels:{offsetY:0}},plotOptions:{bar:{columnWidth:n<5?"20%":"70%",dataLabels:{position:"center",maxItems:100,hideOverflowingLabels:!0}}}};this.extraOptions&&this.extraOptions.plotOptions&&this.extraOptions.plotOptions.bar.horizontal&&(i.plotOptions.bar.barHeight=n<5?"40%":"70%");var o=k.a.merge(a,k.a.merge(this.extraOptions,i)),s=[];return o.xaxis.categories&&o.xaxis.categories.forEach(function(t,e){e<10&&s.push(t)}),this.isHome&&(o.xaxis.categories=s),o}o=k.a.merge(a,this.extraOptions);return o},getIcon:function(t){return this.iconCheck[t]},cloneSeries:function(){var t=k.a.cloneDeep(this.series),e=[];if(0==t.length)return!1;t[0].data&&(t[0].data.forEach(function(t,a){a<10&&e.push(t)}),this.isHome&&(t[0].data=e));var a=k.a.sum(t);return this.isNoData=0==a,t},chartHeight:function(t){return this.lengendData.length?250:"radar"===t?290:420}}},L=z,N=(a("f360"),a("2626"),Object(D["a"])(L,n,i,!1,null,"5fe66ab4",null));e["a"]=N.exports},9777:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{attrs:{title:"下载"}},[a("span",{staticClass:"navitemIcon",on:{click:function(e){t.handleClik("current")}}},[a("icons",{attrs:{type:"daoru",size:20,color:"#9D9D9DFF"}})],1)])},i=[],r={name:"exportMenu",data:function(){return{menus:[{key:"current",name:"导出当前"},{key:"all",name:"导出所有"}]}},methods:{handleClik:function(t){this.$emit("onchange",t)}}},o=r,s=(a("d0d8"),a("2877")),l=Object(s["a"])(o,n,i,!1,null,null,null);e["a"]=l.exports},"9e1c":function(t,e,a){a("7d6d"),t.exports=a("584a").Object.values},a6b3:function(t,e,a){"use strict";var n=a("1908"),i=a.n(n);i.a},bf90:function(t,e,a){var n=a("36c3"),i=a("bf0b").f;a("ce7e")("getOwnPropertyDescriptor",function(){return function(t,e){return i(n(t),e)}})},c1f3:function(t,e,a){},ce77:function(t,e,a){},cebc:function(t,e,a){"use strict";var n=a("268f"),i=a.n(n),r=a("e265"),o=a.n(r),s=a("a4bb"),l=a.n(s),c=a("85f2"),u=a.n(c);function f(t,e,a){return e in t?u()(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function d(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},n=l()(a);"function"===typeof o.a&&(n=n.concat(o()(a).filter(function(t){return i()(a,t).enumerable}))),n.forEach(function(e){f(t,e,a[e])})}return t}a.d(e,"a",function(){return d})},d0d8:function(t,e,a){"use strict";var n=a("c1f3"),i=a.n(n);i.a},d641:function(t,e,a){},db0c:function(t,e,a){t.exports=a("9e1c")},e265:function(t,e,a){t.exports=a("ed33")},e4be:function(t,e,a){"use strict";var n=a("d641"),i=a.n(n);i.a},ed33:function(t,e,a){a("014b"),t.exports=a("584a").Object.getOwnPropertySymbols},f360:function(t,e,a){"use strict";var n=a("602e"),i=a.n(n);i.a},fde4:function(t,e,a){a("bf90");var n=a("584a").Object;t.exports=function(t,e){return n.getOwnPropertyDescriptor(t,e)}}}]);