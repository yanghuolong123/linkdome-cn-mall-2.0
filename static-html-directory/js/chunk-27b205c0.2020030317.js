(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-27b205c0"],{"0265":function(t,e,a){"use strict";var n=a("dbe4"),r=a.n(n);r.a},"028c":function(t,e,a){},"0b55":function(t,e,a){},"0e59":function(t,e,a){var n={"./pathMap0.jpg":"26217","./pathMap1.jpg":"8e22","./pathMap2.jpg":"12e3","./pathMap3.jpg":"bf8b"};function r(t){var e=o(t);return a(e)}function o(t){var e=n[t];if(!(e+1)){var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}return e}r.keys=function(){return Object.keys(n)},r.resolve=o,t.exports=r,r.id="0e59"},"12e3":function(t,e,a){t.exports=a.p+"img/pathMap2.1704ebac.jpg"},"13c8":function(t,e,a){var n=a("c3a1"),r=a("36c3"),o=a("355d").f;t.exports=function(t){return function(e){var a,i=r(e),s=n(i),c=s.length,l=0,p=[];while(c>l)o.call(i,a=s[l++])&&p.push(t?[a,i[a]]:i[a]);return p}}},"145c":function(t,e,a){"use strict";var n=a("9ab2"),r=a.n(n);r.a},"1bca":function(t,e,a){"use strict";var n=a("2c49"),r=a.n(n);r.a},"1e1b":function(t,e,a){},"1eaa":function(t,e,a){"use strict";var n=a("d6ac"),r=a.n(n);r.a},26217:function(t,e,a){t.exports=a.p+"img/pathMap0.1704ebac.jpg"},"2c49":function(t,e,a){},4043:function(t,e,a){"use strict";var n=a("ad30"),r=a.n(n);r.a},4199:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"report-center"},[a("div",{staticStyle:{"min-width":"1400px",width:"100%","margin-bottom":"21px"}},[a("div",{staticClass:"day-report-date"},[a("Row",{staticClass:"week-select-date"},[a("Col",{attrs:{span:"12"}},[a("DatePicker",{staticStyle:{width:"230px"},attrs:{type:"date",editable:!1,options:t.options3,placeholder:"选择日期",format:t.weekShowText},on:{"on-change":t.selectTimeDate,"on-open-change":t.selectDate},model:{value:t.selectDateTime,callback:function(e){t.selectDateTime=e},expression:"selectDateTime"}})],1)],1),a("div",{staticClass:"report-query",on:{click:t.reportQuery}},[t._v("查询")]),a("div",{staticClass:"icon-download",attrs:{title:"下载报告"},on:{click:t.uploadReport}},[a("icons",{attrs:{type:"daoru",color:"#2a7dc1",size:20}})],1),a("div",{staticStyle:{clear:"both"}})],1)]),a("div",{staticClass:"pdf-text-box",class:{pdfAction:t.showPDF}},[a("div",{attrs:{id:"pdfDom"}},[a("report-day-cover",{key:"surface ",ref:"coverData",attrs:{pageNumber:t.paginationNumber,reportType:t.reportT}}),a("report-week-one",{key:"first",ref:"cover_one_data",attrs:{computedData:t.eeoComputedRes}}),a("report-week-two",{key:"second",ref:"cover_two_data"}),a("report-week-six",{key:"third",ref:"cover_six_data"}),t._l(t.floorListData,function(t,e){return a("report-week-three",{key:e,attrs:{dataValue:t,floorNumber:e,pageNumber:4+e}})}),0==t.isShopArea&&t.floorListData.length<4?a("report-day-cover-back",{key:"last"}):t._e()],2),a("div",{attrs:{id:"pdfDomOne"}},[t._l(t.floorListDataTwo,function(e,n){return a("report-week-three",{key:n,attrs:{dataValue:e,pageNumber:4+n+t.floorListData.length}})}),0==t.isShopArea?a("report-day-cover-back",{key:"last"}):t._e()],2),t.isShopArea?a("div",{attrs:{id:"pdfDomTwo"}},[a("report-day-list-four",{ref:"areaList"}),t._l(t.formatList,function(t,e){return a("report-day-list-format",{key:e,ref:"formatList",refInFor:!0})}),a("report-day-cover-back",{key:"last"})],2):t._e()])])},r=[],o=a("db0c"),i=a.n(o),s=a("795b"),c=a.n(s),l=(a("5df3"),a("ac6a"),a("7f7f"),a("0a0d")),p=a.n(l),m=(a("c5f6"),a("b97d")),u=a("b057"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"reportOneText"},[a("report-list-header",{attrs:{monthlyType:t.monthlyType}}),a("div",{staticClass:"one-occupancy-total"},[a("page-title",{attrs:{companyName:t.companyName,typeName:t.typeName}}),a("div",{staticClass:"one-occupancy-total-text"},t._l(t.totalOccupancy,function(e,n){return a("div",{key:n,staticClass:"one-occupancy-list"},[a("img",{attrs:{src:e.img,alt:""}}),a("div",{staticClass:"one-occupancy-list-text",class:{"list-text-one":e.action}},[a("p",{staticClass:"list-text-name"},[t._v(t._s(e.name))]),a("p",{staticClass:"list-text-data"},[t._v(t._s(e.data)+"人")]),e.date?a("p",{staticClass:"list-text-date"},[t._v(t._s(e.date))]):t._e(),e.time?a("p",{staticClass:"list-text-time"},[t._v(t._s(e.time))]):t._e()])])}))],1),a("div",{staticClass:"one-trend-total"},[a("page-title",{attrs:{typeName:t.peakType}}),t.ifOneCharts?a("vue-highcharts",{staticStyle:{width:"100%",height:"550px","margin-top":"50px"},attrs:{options:t.trendOption}}):t._e()],1),a("new-report-table",{attrs:{data:t.detailTableData}}),a("div",{staticClass:"page_number"},[t._v("第1页")]),a("report-list-floor")],1)},f=[],h=(a("28a5"),a("6bd5")),y=a("149c"),g=a("604f"),v=a.n(g),b=a("b657"),D=a("c1df"),_=a.n(D),w=a("2ef0"),T=a.n(w),x=a("c4f1"),L={name:"report-monthly-one",props:{computedData:{type:Array,default:function(){return[]}}},components:{reportListHeader:h["a"],reportListFloor:y["a"],VueHighcharts:v.a,pageTitle:b["a"],newReportTable:x["a"]},data:function(){return{tableName:"时间",monthlyType:" ",ifOneCharts:!1,typeName:"客流总览",peakType:"客流趋势",detailsType:"详细客流数据",totalOccupancy:[{img:a("bb77"),name:"累计客流",action:!0,data:0},{img:a("729e"),name:"客流峰值",data:0,date:""},{img:a("1a36"),name:"平均客流",data:0,date:"每天"},{img:a("7a8d"),name:"集客量峰值",data:0,date:"",time:""}],trendOption:{title:{text:" "},subtitle:{text:""},credits:{enabled:!1},yAxis:{title:{text:""}},xAxis:{categories:["周一","周二","周三","周四","周五","周六","周日"]},tooltip:{formatter:function(){return this.x+"<br>"+this.series.name+": "+this.y.toLocaleString()+"人"}},series:[{name:"本周客流",color:"#4472c4",type:"column",data:[]},{name:"上周客流",type:"column",color:"#ed7d31",data:[]}],responsive:{rules:[{condition:{maxWidth:500},chartOptions:{legend:{layout:"horizontal",align:"center",verticalAlign:"bottom"}}}]}}}},methods:{occupancyList:function(t){this.totalOccupancy[0].data=t.property[0].enter.total.number.toLocaleString(),this.totalOccupancy[1].data=t.property[0].enter.highest.number.toLocaleString();var e=t.property[0].enter.highest.timeRange.split("-"),a=e[2].split(" ")[0],n=e[0]+"-"+e[1]+"-"+a;this.totalOccupancy[1].date=_()(n).format("YYYY-MM-DD"),this.totalOccupancy[2].data=t.property[0].enter.avg.number.toLocaleString(),this.totalOccupancy[3].data=t.property[0].occupancy.highest.number.toLocaleString();var r=t.property[0].occupancy.highest.timeRange.split("-"),o=r[2].split(" ")[1],i=r[5].split(" ")[1],s=r[2].split(" ")[0],c=r[0]+"-"+r[1]+"-"+s;this.totalOccupancy[3].date=_()(c).format("YYYY-MM-DD"),this.totalOccupancy[3].time=o+" - "+i},dataList:function(t,e){var a=this;this.trendOption.series[0].data=[],this.trendOption.series[1].data=[],t.forEach(function(t,n){a.trendOption.series[0].data.push(t.enter),a.trendOption.series[1].data.push(e[n].enter)}),this.$nextTick(function(){a.ifOneCharts=!0})}},computed:{companyName:function(){return this.$store.state.report.companyName},tableWidth:function(){return 100/this.tableData.time.length},detailTableData:function(){var t=[];return this.computedData.forEach(function(e,a){var n,r=_()(e.begin).format("E");switch(r){case"1":n="周一";break;case"2":n="周二";break;case"3":n="周三";break;case"4":n="周四";break;case"5":n="周五";break;case"6":n="周六";break;case"7":n="周日";break}t.push({time:n,enter:"".concat(e.enter.total.toLocaleString(),"人"),highest:"".concat(e.occupancy.highest.number.toLocaleString(),"人\n          ").concat(_()(e.occupancy.highest.time).format("HH"),":00-").concat(_()(e.occupancy.highest.time).format("HH"),":59")})}),t}},created:function(){},mounted:function(){}},k=L,O=(a("ea72"),a("2877")),N=Object(O["a"])(k,d,f,!1,null,"6a744fb2",null),S=N.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"reportOneText"},[a("report-list-header",{attrs:{monthlyType:t.monthlyType}}),a("div",{staticClass:"one-occupancy-total"},[a("page-title",{attrs:{companyName:t.companyName,typeName:t.passagesType}})],1),a("div",{staticClass:"one-trend-total"},[t._m(0),t.ifLevel?a("vue-highcharts",{staticStyle:{width:"100%",height:"600px","margin-top":"50px"},attrs:{options:t.weekTwoData}}):t._e()],1),a("div",{staticStyle:{overflow:"hidden"}},[a("div",{staticClass:"one-trend-total",staticStyle:{width:"600px",float:"left"}},[t._m(1),t.ifLevel?a("vue-highcharts",{staticStyle:{width:"100%",height:"550px","margin-top":"50px"},attrs:{options:t.levelOption}}):t._e()],1),a("div",{staticClass:"one-trend-total",staticStyle:{width:"600px",height:"550px",float:"right"}},[t._m(2),t.ifAccounted?a("vue-highcharts",{staticStyle:{width:"100%",height:"450px","margin-top":"50px"},attrs:{options:t.accountedOption}}):t._e()],1)]),a("div",{staticClass:"page_number"},[t._v("第2页")]),a("report-list-floor")],1)},Y=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"one-trend-total-title"},[a("div",{staticClass:"one-trend-total-title"},[a("span",[t._v("出入口TOP10两周数据对比")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"one-trend-total-title"},[a("div",{staticClass:"one-trend-total-title"},[a("span",[t._v("出入口TOP10排行")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"one-trend-total-title"},[a("div",{staticClass:"one-trend-total-title"},[a("span",[t._v("出入口TOP10占比")])])])}],E=(a("7514"),a("e814")),M=a.n(E),j=a("affc"),$={name:"report-monthly-two",components:{reportListHeader:h["a"],reportListFloor:y["a"],VueHighcharts:v.a,pageTitle:b["a"],reportTable:j["a"]},data:function(){return{ifLevel:!0,ifAccounted:!0,table:"",monthlyType:" ",passagesType:"出入口客流分析",passagesTOP:"出入口TOP10数据",weekTwoData:{chart:{type:"column"},title:{text:""},subtitle:{text:""},xAxis:{categories:["name1","name2","name3","name4","name5","name6","name7","name8","name9","name10"],crosshair:!0,labels:{style:{color:"#666",fontSize:"10px",fontWeight:"bold",fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif'}}},yAxis:{min:0,title:{text:" "}},tooltip:{formatter:function(){return this.x+"<br>"+this.series.name+": "+this.y.toLocaleString()+"人"}},plotOptions:{column:{borderWidth:0}},credits:{enabled:!1},series:[{name:"本周客流",color:"#4472c4",data:[43934,52503,57177,69658,97031,119931,137133,154175,43934,52503]},{name:"上周客流",color:"#ed7d31",data:[33934,51503,27177,49658,77031,99931,117133,134175,63934,92503]}]},levelOption:{chart:{type:"column"},title:{text:""},subtitle:{text:""},xAxis:{categories:["name1","name2","name3","name4","name5","name6","name7","name8","name9","name10"],crosshair:!0,labels:{style:{color:"#666",fontSize:"10px",fontWeight:"bold",fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif'}}},yAxis:{min:0,title:{text:" "}},tooltip:{headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.1f} mm</b></td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0,formatter:function(){return this.x+"<br>"+this.points[0].series.name+": "+this.y.toLocaleString()+"人"}},plotOptions:{column:{borderWidth:0}},credits:{enabled:!1},series:[{name:"客流量",color:"#4472c4",data:[43934,52503,57177,69658,97031,119931,137133,154175,43934,52503]}]},accountedOption:{chart:{type:"container",spacing:[0,0,0,0],margin:[0,0,0,0]},title:{floating:!0,text:""},credits:{enabled:!1},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f} %",style:{color:"#666"}},point:{events:{}}}},series:[{type:"pie",innerSize:"60%",name:"客流",data:[{name:"Firefox",y:45},["IE",26.8],{name:"Chrome",y:12.8},["Safari",8.5],["Opera",6.2],["其他",.7]]}]},function:function(t){var e=t.series[0].center[1],a=M()(t.title.styles.fontSize);t.setTitle({y:e+a/2})}}},methods:{tableList:function(t,e){var a=this;a.ifLevel=!1,a.ifAccounted=!1,a.weekTwoData.xAxis.categories=[],a.weekTwoData.series=[],a.levelOption.xAxis.categories=[],a.levelOption.series=[],a.accountedOption.series[0].data=[];var n=[],r={name:"客流量",color:"#4472c4",data:[]},o={name:"上周客流",data:[],color:"#ed7d31"},i=[];t.forEach(function(t){t.gate.forEach(function(t){i.push(t)})});var s=[];e.forEach(function(t){t.gate.forEach(function(t){s.push(t)})});var c=T.a.orderBy(i,["enter"],"desc");T.a.forEach(c,function(t,e){if(e<10&&(a.levelOption.xAxis.categories.push(t.name),a.weekTwoData.xAxis.categories.push(t.name),r.data.push(t.enter),o.data.push(T.a.find(s,function(e){return e.bzid===t.bzid}).enter||null),0!=t.enter)){var i={};i.name=t.name,i.y=t.enter,n.push(i),a.accountedOption.series[0].data.push(i)}}),a.levelOption.series.push(r);var l=T.a.cloneDeep(r);l.name="本周客流",a.weekTwoData.series.push(l),a.weekTwoData.series.push(o),this.$nextTick(function(){a.ifLevel=!0,a.ifAccounted=!0})}},computed:{companyName:function(){return this.$store.state.report.companyName}},created:function(){},mounted:function(){}},A=$,z=(a("d201"),Object(O["a"])(A,C,Y,!1,null,"7948071e",null)),F=z.exports,I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"reportOneText"},[a("report-list-header",{attrs:{monthlyType:t.monthlyType}}),a("div",{staticClass:"one-occupancy-total"},[a("page-title",{attrs:{companyName:t.companyName,typeName:t.typeName}}),a("div",{staticClass:"cameraList"},[1==t.hasCover?a("div",{staticStyle:{position:"absolute",left:"0",top:"0",background:"rgba(0, 0, 0, .3)","z-index":"999",width:"100%",height:"100%"}}):t._e(),a("img",{attrs:{src:t.floorImg,alt:""}}),t._l(t.cameraList,function(e,n){return a("div",{key:n,staticClass:"camera-place",style:{left:1350*e.position.x+"px",top:708*e.position.y+"px"}},[a("p",[t._v(t._s(e.name))]),a("p",[t._v("客流: "+t._s(e.data)+"人")])])})],2),a("page-title",{staticStyle:{"margin-top":"50px"},attrs:{typeName:t.textType}}),a("report-table",{ref:"report_table"})],1),a("div",{staticClass:"page_number"},[t._v("第"+t._s(t.pageText)+"页")]),a("report-list-floor")],1)},P=[],R=(a("3022"),{name:"report-monthly-three",components:{reportListHeader:h["a"],reportListFloor:y["a"],VueHighcharts:v.a,pageTitle:b["a"],reportTable:j["a"]},props:{dataValue:{type:Object},pageNumber:{type:Number},floorNumber:{type:Number}},data:function(){return{monthlyType:" ",typeName:"出入口客流分析",textType:"出入口排行",floorImg:"",cameraList:[]}},computed:{companyName:function(){return this.$store.state.report.companyName},pageText:function(){return this.pageNumber}},created:function(){},mounted:function(){this.dataList()},methods:{dataList:function(){var t=this;this.cameraList=[];var e=[],n=a("0e59")("./pathMap"+this.floorNumber+".jpg");this.floorImg=n||"",this.dataValue.gate.forEach(function(a){var n={};n.name=a.name,n.position=a.position,n.data=a.enter.toLocaleString(),t.cameraList.push(n);var r={};r.name=a.name,r.enter="".concat(a.enter.toLocaleString(),"人"),r.peak=a.highest.number.toLocaleString(),r.time=_()(a.highest.begin.split(" ")[0]).format(" YYYY-MM-DD"),r.mean=a.avg.toLocaleString(),e.length<7&&e.push(r)}),this.$refs.report_table.listData(e)},getBase64Image:function(t){var e=document.createElement("canvas");e.width=t.width,e.height=t.height;var a=e.getContext("2d");a.drawImage(t,0,0,t.width,t.height);var n=e.toDataURL("image/png");return n}}}),H=R,W=(a("0265"),Object(O["a"])(H,I,P,!1,null,"06273c7a",null)),B=W.exports,V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"reportOneText"},[a("report-list-header",{attrs:{monthlyType:t.monthlyType}}),a("page-title",{attrs:{companyName:t.companyName,typeName:t.typeName}}),a("page-title",{attrs:{typeName:t.comeName}}),a("report-table",{ref:"reporTable",attrs:{firstName:t.tableName}}),a("div",{staticClass:"page_number"},[t._v("第3页")]),a("report-list-floor")],1)},U=[],G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"table"},[a("li",[a("p",[t._v(t._s(t.firstName))]),a("p",[t._v("客流量")]),a("p",[t._v("客流量峰值")]),a("p",[t._v("平均客流量")])]),t._l(t.list,function(e){return a("li",[a("p",[t._v(t._s(e.name))]),a("p",[t._v(t._s(e.enter))]),a("p",[t._v(t._s(e.peak)+" 人 "+t._s(e.time))]),a("p",[t._v(t._s(e.mean)+" 人/天")])])})],2)},J=[],Q={name:"report-monthly-table",props:{firstName:{type:String,default:"出入口名称"}},components:{},data:function(){return{list:[]}},methods:{listData:function(t){this.list=[],this.list=t}},computed:{},created:function(){},mounted:function(){}},q=Q,K=(a("1bca"),Object(O["a"])(q,G,J,!1,null,"cbc58e3c",null)),X=K.exports,Z={name:"report-monthly-one",components:{reportListHeader:h["a"],reportListFloor:y["a"],VueHighcharts:v.a,pageTitle:b["a"],reportTable:X},data:function(){return{tableName:"出入口名称",monthlyType:" ",ifOneCharts:!1,typeName:"出入口客流分析",comeName:"出入口TOP10数据",peakType:"客流趋势",detailsType:"详细客流数据",tableData:{time:[],enter:{total:"",list:[]},peakData:{total:{time:"",data:""},list:[]}}}},methods:{dataList:function(t){var e=[],a=i()(t),n=[];a.forEach(function(t){t.gate.forEach(function(t){n.push(t)})});var r=T.a.orderBy(n,["enter"],"desc");r.forEach(function(t,a){if(a<10){var n={};n.name=t.name,n.enter="".concat(t.enter.toLocaleString(),"人"),n.peak=t.highest.number.toLocaleString();var r=t.highest.begin.split(" ");n.time=_()(r[0]).format(" YYYY-MM-DD"),n.mean=t.avg.toLocaleString(),e.push(n)}}),this.$refs.reporTable.list=e}},computed:{companyName:function(){return this.$store.state.report.companyName},tableWidth:function(){return 100/this.tableData.time.length}},created:function(){},mounted:function(){}},tt=Z,et=(a("4043"),Object(O["a"])(tt,V,U,!1,null,"12ffd796",null)),at=et.exports,nt=a("760c"),rt=a("fa44"),ot=a("ad00"),it=a("3191"),st=a("1c31"),ct=a("9f06"),lt={name:"report-day",mixins:[ct["a"]],components:{reportDayCover:m["a"],reportWeekOne:S,reportWeekTwo:F,reportWeekThree:B,reportWeekSix:at,reportDayCoverBack:u["a"],reportDayListFour:nt["a"],reportDayListFormat:rt["a"]},data:function(){return{isShopArea:!1,reportDateName:"",paginationNumber:"",reportT:"周报",selectDateTime:"",weekShowText:"",threeList:[],floorListData:[],floorListDataTwo:[],reportName:"",downloadPdf:!1,ifLoading:!1,showPDF:!1,newDate:"",newDateEnd:"",newTime:"",companyId:"",reportSelectDate:"",companyName:"",bzId:[],oneListData:[{img:a("bb77"),name:"累计客流",action:!0,data:0},{img:a("729e"),name:"客流峰值",data:0,time:""},{img:a("1a36"),name:"平均客流",data:0,time:""},{img:a("7a8d"),name:"集客量峰值",data:0,time:""}],allBzId:[],enterListData:"",property_name:"",options3:{disabledDate:function(t){var e=_()().locale("zh").format("d");return 0==Number(e)&&(e=7),t&&t.valueOf()>p()()-864e5*Number(e)}},eeoComputedRes:[],formatList:[],formatListTwo:[]}},computed:{leftWidth:function(){return this.$store.state.report.leftWidth},propertyid:function(){return this.$store.state.home.headerAction}},watch:{"$store.state.home.headerAction":function(){this.selectDateTime="",this.showPDF=!1;var t=this.$router.currentRoute.name;"WeekReport"===t&&this.parameterData()}},activated:function(){this.parameterData()},mounted:function(){},methods:{parameterData:function(){var t=this;t.showPDF=!1,Object(it["k"])().then(function(e){t.companyId=e.data.data.company_id,t.bzId=[],e.data.data.property.forEach(function(e){if(e.property_id==t.propertyid){t.$store.commit("companyName",e.name),t.property_name=e.name;var a={};a.bzid=e.bzid,a.property_id=e.property_id,a.name=e.name,t.bzId.push(a)}})}),Object(ot["b"])({entity:52}).then(function(e){t.allBzId=[],e.data.data.map(function(e){if(e.property_id==t.propertyid){var a={};a.id=e.id,a.allId=[],e.children.forEach(function(t){a.allId.push(t.id)}),t.allBzId.push(a)}})})},reportQuery:function(){var t=this;if(""==t.newDate)return alert("请选择时间"),!1;try{window.TDAPP.onEvent("周报分析页面","数据查询",{"时间段":t.newDate})}catch(n){console.log("周报分析页面-数据查询-埋点error:"+n)}t.showPDF=!1;var e=this.propertyid,a=[];T.a.forEach(t.bzId,function(t){a.push(t.bzid)}),c.a.all([Object(it["x"])({companyId:t.companyId,timeRange:t.newDate}),Object(it["s"])({bzid:a.toString(),type:"enter",range:t.newDate,innerRange:"1day"}),Object(it["s"])({bzid:a.toString(),type:"enter",range:t.newDateEnd,innerRange:"1day"}),Object(st["a"])({timeRange:t.newDate,propertyid:e}),Object(st["f"])(e,t.newDate),Object(st["f"])(e,t.newDateEnd),Object(st["d"])({property_id:e,time:t.newDate,type:"Date"}),Object(st["e"])({property_id:e,time:t.newDate,type:"Date"})]).then(function(e){var a=e[0].data.data;t.$refs.cover_one_data.occupancyList(a);var n=e[1].data.data,r=e[2].data.data;t.eeoComputedRes=e[3].data.data,t.$refs.cover_one_data.dataList(n,r);var o=e[4].data.data,s=i()(o),c=[],l=[];s.map(function(t){c.length<4?c.push(t):l.push(t)}),t.floorListData=c,t.floorListDataTwo=l;var p,m=e[5].data.data;t.$refs.cover_two_data.tableList(s,i()(m)),t.$refs.cover_six_data.dataList(s),t.areaDataList(e[6].data.data),t.formatData(e[7].data.data),p=t.isShopArea?t.floorListData.length+t.floorListDataTwo.length+4+t.formatList.length:t.floorListData.length+t.floorListDataTwo.length+3,t.paginationNumber="共"+p+"页",t.showPDF=!0})},uploadReport:function(){var t=this;if(0==t.showPDF)return alert("请先查询报告"),!1;t.reportName="客流数据分析周报"+t.reportDateName,t.getPdf("pdfDom",8),this.floorListData.length>=4&&t.getPdf("pdfDomOne",8);try{window.TDAPP.onEvent("周报分析页面","下载",{})}catch(e){console.log("周报分析页面-下载-埋点error:"+e)}},areaDataList:function(t){var e=this,a=[];t.forEach(function(t){a.length<20&&a.push(e.fromatsDataDispose(t))});var n=4+this.floorListData.length+this.floorListDataTwo.length,r={propertyName:this.property_name,titleType:"商铺区域分析",tableName:"区域客流排行",tableTitle:["区域名称","客流量","客流量峰值"],pageNumber:n};this.isShopArea&&this.$refs.areaList.dataList(r,a)},formatData:function(t){var e=this;this.formatList=[],this.formatListTwo=[],t.forEach(function(t,a){var n={};n.name=t.name,n.toTen=[],n.afterTen=[];var r,o=T.a.orderBy(t.shops,["visits"],["desc"]);r=t.shops.length>10?T.a.reverse(o):[],o.forEach(function(t){n.toTen.length<10&&n.toTen.push(e.fromatsDataDispose(t))}),r.forEach(function(t){n.afterTen.length<10&&n.afterTen.push(e.fromatsDataDispose(t))}),e.isShopArea&&(e.formatList.length<6?e.formatList.push(n):e.formatListTwo.push(n))});var a={propertyName:this.property_name,titleType:"商铺区域分析",tableTitle:["区域名称","客流量","客流量峰值"],formatName:"",pageNumber:0};setTimeout(function(){e.formatList.forEach(function(t,n){a.formatName=t.name,a.pageNumber=5+e.floorListData.length+e.floorListDataTwo.length+n,e.$refs.formatList[n].dataList(a,t.toTen,t.afterTen)}),e.formatListTwo.forEach(function(t,n){a.formatName=t.name,a.pageNumber=5+e.floorListData.length+e.floorListDataTwo.length+e.formatList.length+n,e.$refs.formatListTwo[n].dataList(a,t.toTen,t.afterTen)})})},fromatsDataDispose:function(t){var e,a,n={};return"-"==t.visits?e="-":(e=Number(t.visits)>0?Number(t.visits):0,e=e.toLocaleString()+"人"),"-"==t.peakVisit?a="-":(a=Number(t.peakVisit)>0?Number(t.peakVisit):0,a=a.toLocaleString()+"人 "+t.peakTime),n.name=t.name,n.age=e,n.address=a,n},selectTimeDate:function(t){var e=this;if(23==t.length)return e.newDate="",e.weekShowText="",e.selectDateTime="",!1;var a=_()(t).startOf("isoweek").format("YYYY-MM-DD"),n=_()(t).endOf("isoweek").format("YYYY-MM-DD");e.newDate=a+","+n,e.weekShowText=a+" - "+n,e.reportDateName=_()(t).startOf("isoweek").format("YYYY/MM/DD")+"--"+_()(t).endOf("isoweek").format("YYYY/MM/DD");var r=_()(a).subtract(1,"day").format("YYYY-MM-DD HH:mm:ss"),o=_()(r).startOf("isoweek").format("YYYY-MM-DD"),i=_()(r).endOf("isoweek").format("YYYY-MM-DD");e.newDateEnd=o+","+i,e.$store.commit("coverDateTime",e.weekShowText);var s=_()(a).format("MM-DD")+" - "+_()(n).format("MM-DD");e.$store.commit("companyDateTime",s)},selectDate:function(t){1==t&&(this.weekShowText="")}},created:function(){}},pt=lt,mt=(a("b671"),a("145c"),Object(O["a"])(pt,n,r,!1,null,"66980398",null));e["default"]=mt.exports},6494:function(t,e,a){"use strict";var n=a("0b55"),r=a.n(n);r.a},"7d6d":function(t,e,a){var n=a("63b6"),r=a("13c8")(!1);n(n.S,"Object",{values:function(t){return r(t)}})},"7e64":function(t,e,a){},"8e22":function(t,e,a){t.exports=a.p+"img/pathMap1.1704ebac.jpg"},"9ab2":function(t,e,a){},"9e1c":function(t,e,a){a("7d6d"),t.exports=a("584a").Object.values},"9f06":function(t,e,a){"use strict";a("96cf");var n=a("3b8d"),r=a("795b"),o=a.n(r),i=(a("ac6a"),a("5df3"),a("e285")),s=a("3191"),c=a("c1df"),l=a.n(c);e["a"]={data:function(){return{holiyData:[],allholidays:[]}},mounted:function(){},methods:{getHolidays:function(){var t=l()().year();return o.a.all([Object(i["l"])(t,20),Object(i["l"])(t,21)]).catch(function(t){console.log(t)})},findDaysInMonth:function(t,e){var a=[],n="YYYY-MM",r="YYYY-MM-DD";if(t.length){var o=l()(e,n).startOf("month"),i=l()(e,n).endOf("month");return t.forEach(function(t){(l()(t.begin).isBetween(o,i)||l()(t.end).isBetween(o,i))&&(l()(t.begin).isBefore(o)&&(t.begin=o.format(r)),l()(t.end).isAfter(i)&&(t.end=i.format(r)),a.push(t))}),a}},fetchData:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e,a){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getHolidays();case 2:return n=t.sent,this.allholidays=this.findDaysInMonth(n[0].data.data.concat(n[1].data.data),a),r=this.allholidays.map(function(t){return Object(s["s"])({innerRange:1===t.duration?"1h":"1day",range:"".concat(t.begin,",").concat(t.end),type:"enter",bzid:e})}),t.abrupt("return",o.a.all(r));case 6:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}()}}},ad30:function(t,e,a){},affc:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"table"},[a("li",[a("p",[t._v(t._s(t.firstName))]),a("p",[t._v("客流量")]),a("p",[t._v("客流量峰值")]),a("p",[t._v("平均客流量")])]),t._l(t.list,function(e){return a("li",[a("p",[t._v(t._s(e.name))]),a("p",[t._v(t._s(e.enter))]),a("p",[t._v(t._s(e.peak)+" 人 "+t._s(e.time))]),a("p",[t._v(t._s(e.mean)+" 人/天")])])})],2)},r=[],o={name:"report-monthly-table",props:{firstName:{type:String,default:"出入口名称"}},components:{},data:function(){return{list:[]}},methods:{listData:function(t){this.list=[],this.list=t}},computed:{},created:function(){},mounted:function(){}},i=o,s=(a("eb0d"),a("2877")),c=Object(s["a"])(i,n,r,!1,null,"729fe648",null);e["a"]=c.exports},b657:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",{staticClass:"pagesubtitle"},[a("span",[t._v(t._s(t.typeName))]),a("span",[t._v(t._s(t.companyName))]),a("span")])},r=[],o={props:{companyName:{type:String,default:""},typeName:{type:String,default:""}}},i=o,s=(a("1eaa"),a("2877")),c=Object(s["a"])(i,n,r,!1,null,null,null);e["a"]=c.exports},b671:function(t,e,a){"use strict";var n=a("1e1b"),r=a.n(n);r.a},bf8b:function(t,e,a){t.exports=a.p+"img/pathMap3.1704ebac.jpg"},c4f1:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"table"},[a("li",t._l(t.columns,function(e,n){return a("p",{key:n},[t._v(t._s(e.name))])})),t.data.length?t._l(t.data,function(e,n){return a("li",{key:n},t._l(t.columns,function(n,r){return a("p",{key:e+"_"+r},[t._v(t._s(e[n.key]))])}))}):t._e()],2)},r=[],o={name:"newReportTable",props:{columns:{type:Array,default:function(){return[{name:"时间",key:"time"},{name:"客流量",key:"enter"},{name:"集客量峰值",key:"highest"}]}},data:{type:Array,default:function(){return[]}}}},i=o,s=(a("6494"),a("2877")),c=Object(s["a"])(i,n,r,!1,null,"4e2cb2d8",null);e["a"]=c.exports},d201:function(t,e,a){"use strict";var n=a("ea7a"),r=a.n(n);r.a},d6ac:function(t,e,a){},db0c:function(t,e,a){t.exports=a("9e1c")},dbe4:function(t,e,a){},ea72:function(t,e,a){"use strict";var n=a("028c"),r=a.n(n);r.a},ea7a:function(t,e,a){},eb0d:function(t,e,a){"use strict";var n=a("7e64"),r=a.n(n);r.a}}]);